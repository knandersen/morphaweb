var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t){return t&&t.__esModule?t.default:t}var n={},r={},i=t.parcelRequired167;null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},t.parcelRequired167=i),i.register("f1q41",(function(e,n){(function(){var r,i="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",o=16,u=32,l=64,c=128,h=256,f=1/0,d=9007199254740991,p=NaN,v=4294967295,m=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",o],["flip",512],["partial",u],["partialRight",l],["rearg",h]],g="[object Arguments]",y="[object Array]",b="[object Boolean]",w="[object Date]",k="[object Error]",_="[object Function]",A="[object GeneratorFunction]",C="[object Map]",P="[object Number]",S="[object Object]",x="[object Promise]",I="[object RegExp]",M="[object Set]",E="[object String]",O="[object Symbol]",j="[object WeakMap]",R="[object ArrayBuffer]",T="[object DataView]",L="[object Float32Array]",D="[object Float64Array]",B="[object Int8Array]",z="[object Int16Array]",W="[object Int32Array]",F="[object Uint8Array]",U="[object Uint8ClampedArray]",V="[object Uint16Array]",N="[object Uint32Array]",H=/\b__p \+= '';/g,X=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,Q=RegExp(G.source),Z=RegExp($.source),Y=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,it=RegExp(rt.source),at=/^\s+/,st=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,vt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,At="\ud800-\udfff",Ct="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pt="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",xt="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\ufe0e\\ufe0f",Mt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Et="['’]",Ot="[\ud800-\udfff]",jt="["+Mt+"]",Rt="["+Ct+"]",Tt="\\d+",Lt="["+Pt+"]",Dt="["+St+"]",Bt="[^"+At+Mt+Tt+Pt+St+xt+"]",zt="\ud83c[\udffb-\udfff]",Wt="[^\ud800-\udfff]",Ft="(?:\ud83c[\udde6-\uddff]){2}",Ut="[\ud800-\udbff][\udc00-\udfff]",Vt="["+xt+"]",Nt="\\u200d",Ht="(?:"+Dt+"|"+Bt+")",Xt="(?:"+Vt+"|"+Bt+")",qt="(?:['’](?:d|ll|m|re|s|t|ve))?",Gt="(?:['’](?:D|LL|M|RE|S|T|VE))?",$t="(?:"+Rt+"|"+zt+")"+"?",Qt="["+It+"]?",Zt=Qt+$t+("(?:"+Nt+"(?:"+[Wt,Ft,Ut].join("|")+")"+Qt+$t+")*"),Yt="(?:"+[Lt,Ft,Ut].join("|")+")"+Zt,Jt="(?:"+[Wt+Rt+"?",Rt,Ft,Ut,Ot].join("|")+")",Kt=RegExp(Et,"g"),te=RegExp(Rt,"g"),ee=RegExp(zt+"(?="+zt+")|"+Jt+Zt,"g"),ne=RegExp([Vt+"?"+Dt+"+"+qt+"(?="+[jt,Vt,"$"].join("|")+")",Xt+"+"+Gt+"(?="+[jt,Vt+Ht,"$"].join("|")+")",Vt+"?"+Ht+"+"+qt,Vt+"+"+Gt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tt,Yt].join("|"),"g"),re=RegExp("["+Nt+At+Ct+It+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,oe={};oe[L]=oe[D]=oe[B]=oe[z]=oe[W]=oe[F]=oe[U]=oe[V]=oe[N]=!0,oe[g]=oe[y]=oe[R]=oe[b]=oe[T]=oe[w]=oe[k]=oe[_]=oe[C]=oe[P]=oe[S]=oe[I]=oe[M]=oe[E]=oe[j]=!1;var ue={};ue[g]=ue[y]=ue[R]=ue[T]=ue[b]=ue[w]=ue[L]=ue[D]=ue[B]=ue[z]=ue[W]=ue[C]=ue[P]=ue[S]=ue[I]=ue[M]=ue[E]=ue[O]=ue[F]=ue[U]=ue[V]=ue[N]=!0,ue[k]=ue[_]=ue[j]=!1;var le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,he=parseInt,fe="object"==typeof t&&t&&t.Object===Object&&t,de="object"==typeof self&&self&&self.Object===Object&&self,pe=fe||de||Function("return this")(),ve=n&&!n.nodeType&&n,me=ve&&e&&!e.nodeType&&e,ge=me&&me.exports===ve,ye=ge&&fe.process,be=function(){try{var t=me&&me.require&&me.require("util").types;return t||ye&&ye.binding&&ye.binding("util")}catch(t){}}(),we=be&&be.isArrayBuffer,ke=be&&be.isDate,_e=be&&be.isMap,Ae=be&&be.isRegExp,Ce=be&&be.isSet,Pe=be&&be.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function xe(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var s=t[i];e(r,s,n(s),t)}return r}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Me(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ee(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Oe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}function je(t,e){return!!(null==t?0:t.length)&&Ve(t,e,0)>-1}function Re(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Te(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function De(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Be(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ze(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var We=qe("length");function Fe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ue(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function Ve(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,He,n)}function Ne(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function He(t){return t!=t}function Xe(t,e){var n=null==t?0:t.length;return n?Qe(t,e)/n:p}function qe(t){return function(e){return null==e?r:e[t]}}function Ge(t){return function(e){return null==t?r:t[e]}}function $e(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function Qe(t,e){for(var n,i=-1,a=t.length;++i<a;){var s=e(t[i]);s!==r&&(n=n===r?s:n+s)}return n}function Ze(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ye(t){return t?t.slice(0,pn(t)+1).replace(at,""):t}function Je(t){return function(e){return t(e)}}function Ke(t,e){return Te(e,(function(e){return t[e]}))}function tn(t,e){return t.has(e)}function en(t,e){for(var n=-1,r=t.length;++n<r&&Ve(e,t[n],0)>-1;);return n}function nn(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var rn=Ge({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),an=Ge({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+le[t]}function on(t){return re.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ln(t,e){return function(n){return t(e(n))}}function cn(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==s||(t[n]=s,a[i++]=n)}return a}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){return on(t)?function(t){var e=ee.lastIndex=0;for(;ee.test(t);)++e;return e}(t):We(t)}function dn(t){return on(t)?function(t){return t.match(ee)||[]}(t):function(t){return t.split("")}(t)}function pn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var vn=Ge({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function t(e){var n,st=(e=null==e?pe:mn.defaults(pe.Object(),e,mn.pick(pe,ae))).Array,At=e.Date,Ct=e.Error,Pt=e.Function,St=e.Math,xt=e.Object,It=e.RegExp,Mt=e.String,Et=e.TypeError,Ot=st.prototype,jt=Pt.prototype,Rt=xt.prototype,Tt=e["__core-js_shared__"],Lt=jt.toString,Dt=Rt.hasOwnProperty,Bt=0,zt=(n=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Wt=Rt.toString,Ft=Lt.call(xt),Ut=pe._,Vt=It("^"+Lt.call(Dt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=ge?e.Buffer:r,Ht=e.Symbol,Xt=e.Uint8Array,qt=Nt?Nt.allocUnsafe:r,Gt=ln(xt.getPrototypeOf,xt),$t=xt.create,Qt=Rt.propertyIsEnumerable,Zt=Ot.splice,Yt=Ht?Ht.isConcatSpreadable:r,Jt=Ht?Ht.iterator:r,ee=Ht?Ht.toStringTag:r,re=function(){try{var t=ha(xt,"defineProperty");return t({},"",{}),t}catch(t){}}(),le=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,fe=At&&At.now!==pe.Date.now&&At.now,de=e.setTimeout!==pe.setTimeout&&e.setTimeout,ve=St.ceil,me=St.floor,ye=xt.getOwnPropertySymbols,be=Nt?Nt.isBuffer:r,We=e.isFinite,Ge=Ot.join,gn=ln(xt.keys,xt),yn=St.max,bn=St.min,wn=At.now,kn=e.parseInt,_n=St.random,An=Ot.reverse,Cn=ha(e,"DataView"),Pn=ha(e,"Map"),Sn=ha(e,"Promise"),xn=ha(e,"Set"),In=ha(e,"WeakMap"),Mn=ha(xt,"create"),En=In&&new In,On={},jn=Ba(Cn),Rn=Ba(Pn),Tn=Ba(Sn),Ln=Ba(xn),Dn=Ba(In),Bn=Ht?Ht.prototype:r,zn=Bn?Bn.valueOf:r,Wn=Bn?Bn.toString:r;function Fn(t){if(to(t)&&!Ns(t)&&!(t instanceof Hn)){if(t instanceof Nn)return t;if(Dt.call(t,"__wrapped__"))return za(t)}return new Nn(t)}var Un=function(){function t(){}return function(e){if(!Ks(e))return{};if($t)return $t(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Vn(){}function Nn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function Qn(t){var e=this.__data__=new qn(t);this.size=e.size}function Zn(t,e){var n=Ns(t),r=!n&&Vs(t),i=!n&&!r&&Gs(t),a=!n&&!r&&!i&&uo(t),s=n||r||i||a,o=s?Ze(t.length,Mt):[],u=o.length;for(var l in t)!e&&!Dt.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ya(l,u))||o.push(l);return o}function Yn(t){var e=t.length;return e?t[$r(0,e-1)]:r}function Jn(t,e){return Ta(Mi(t),or(e,0,t.length))}function Kn(t){return Ta(Mi(t))}function tr(t,e,n){(n!==r&&!Ws(t[e],n)||n===r&&!(e in t))&&ar(t,e,n)}function er(t,e,n){var i=t[e];Dt.call(t,e)&&Ws(i,n)&&(n!==r||e in t)||ar(t,e,n)}function nr(t,e){for(var n=t.length;n--;)if(Ws(t[n][0],e))return n;return-1}function rr(t,e,n,r){return fr(t,(function(t,i,a){e(r,t,n(t),a)})),r}function ir(t,e){return t&&Ei(e,Oo(e),t)}function ar(t,e,n){"__proto__"==e&&re?re(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(t,e){for(var n=-1,i=e.length,a=st(i),s=null==t;++n<i;)a[n]=s?r:So(t,e[n]);return a}function or(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function ur(t,e,n,i,a,s){var o,u=1&e,l=2&e,c=4&e;if(n&&(o=a?n(t,i,a,s):n(t)),o!==r)return o;if(!Ks(t))return t;var h=Ns(t);if(h){if(o=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Dt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return Mi(t,o)}else{var f=pa(t),d=f==_||f==A;if(Gs(t))return Ai(t,u);if(f==S||f==g||d&&!a){if(o=l||d?{}:ma(t),!u)return l?function(t,e){return Ei(t,da(t),e)}(t,function(t,e){return t&&Ei(e,jo(e),t)}(o,t)):function(t,e){return Ei(t,fa(t),e)}(t,ir(o,t))}else{if(!ue[f])return a?t:{};o=function(t,e,n){var r=t.constructor;switch(e){case R:return Ci(t);case b:case w:return new r(+t);case T:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case D:case B:case z:case W:case F:case U:case V:case N:return Pi(t,n);case C:return new r;case P:case E:return new r(t);case I:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case M:return new r;case O:return i=t,zn?xt(zn.call(i)):{}}var i}(t,f,u)}}s||(s=new Qn);var p=s.get(t);if(p)return p;s.set(t,o),ao(t)?t.forEach((function(r){o.add(ur(r,e,n,r,t,s))})):eo(t)&&t.forEach((function(r,i){o.set(i,ur(r,e,n,i,t,s))}));var v=h?r:(c?l?ia:ra:l?jo:Oo)(t);return Ie(v||t,(function(r,i){v&&(r=t[i=r]),er(o,i,ur(r,e,n,i,t,s))})),o}function lr(t,e,n){var i=n.length;if(null==t)return!i;for(t=xt(t);i--;){var a=n[i],s=e[a],o=t[a];if(o===r&&!(a in t)||!s(o))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new Et(i);return Ea((function(){t.apply(r,n)}),e)}function hr(t,e,n,r){var i=-1,a=je,s=!0,o=t.length,u=[],l=e.length;if(!o)return u;n&&(e=Te(e,Je(n))),r?(a=Re,s=!1):e.length>=200&&(a=tn,s=!1,e=new $n(e));t:for(;++i<o;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,s&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else a(e,h,r)||u.push(c)}return u}Fn.templateSettings={escape:Y,evaluate:J,interpolate:K,variable:"",imports:{_:Fn}},Fn.prototype=Vn.prototype,Fn.prototype.constructor=Fn,Nn.prototype=Un(Vn.prototype),Nn.prototype.constructor=Nn,Hn.prototype=Un(Vn.prototype),Hn.prototype.constructor=Hn,Xn.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},Xn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Xn.prototype.get=function(t){var e=this.__data__;if(Mn){var n=e[t];return n===a?r:n}return Dt.call(e,t)?e[t]:r},Xn.prototype.has=function(t){var e=this.__data__;return Mn?e[t]!==r:Dt.call(e,t)},Xn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Mn&&e===r?a:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=nr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,!0)},qn.prototype.get=function(t){var e=this.__data__,n=nr(e,t);return n<0?r:e[n][1]},qn.prototype.has=function(t){return nr(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,r=nr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Xn,map:new(Pn||qn),string:new Xn}},Gn.prototype.delete=function(t){var e=la(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return la(this,t).get(t)},Gn.prototype.has=function(t){return la(this,t).has(t)},Gn.prototype.set=function(t,e){var n=la(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},$n.prototype.add=$n.prototype.push=function(t){return this.__data__.set(t,a),this},$n.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.clear=function(){this.__data__=new qn,this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Qn.prototype.get=function(t){return this.__data__.get(t)},Qn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!Pn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(t,e),this.size=n.size,this};var fr=Ri(wr),dr=Ri(kr,!0);function pr(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function vr(t,e,n){for(var i=-1,a=t.length;++i<a;){var s=t[i],o=e(s);if(null!=o&&(u===r?o==o&&!oo(o):n(o,u)))var u=o,l=s}return l}function mr(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=ga),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?gr(o,e-1,n,r,i):Le(i,o):r||(i[i.length]=o)}return i}var yr=Ti(),br=Ti(!0);function wr(t,e){return t&&yr(t,e,Oo)}function kr(t,e){return t&&br(t,e,Oo)}function _r(t,e){return Oe(e,(function(e){return Zs(t[e])}))}function Ar(t,e){for(var n=0,i=(e=bi(e,t)).length;null!=t&&n<i;)t=t[Da(e[n++])];return n&&n==i?t:r}function Cr(t,e,n){var r=e(t);return Ns(t)?r:Le(r,n(t))}function Pr(t){return null==t?t===r?"[object Undefined]":"[object Null]":ee&&ee in xt(t)?function(t){var e=Dt.call(t,ee),n=t[ee];try{t[ee]=r;var i=!0}catch(t){}var a=Wt.call(t);i&&(e?t[ee]=n:delete t[ee]);return a}(t):function(t){return Wt.call(t)}(t)}function Sr(t,e){return t>e}function xr(t,e){return null!=t&&Dt.call(t,e)}function Ir(t,e){return null!=t&&e in xt(t)}function Mr(t,e,n){for(var i=n?Re:je,a=t[0].length,s=t.length,o=s,u=st(s),l=1/0,c=[];o--;){var h=t[o];o&&e&&(h=Te(h,Je(e))),l=bn(h.length,l),u[o]=!n&&(e||a>=120&&h.length>=120)?new $n(o&&h):r}h=t[0];var f=-1,d=u[0];t:for(;++f<a&&c.length<l;){var p=h[f],v=e?e(p):p;if(p=n||0!==p?p:0,!(d?tn(d,v):i(c,v,n))){for(o=s;--o;){var m=u[o];if(!(m?tn(m,v):i(t[o],v,n)))continue t}d&&d.push(v),c.push(p)}}return c}function Er(t,e,n){var i=null==(t=xa(t,e=bi(e,t)))?t:t[Da(Qa(e))];return null==i?r:Se(i,t,n)}function Or(t){return to(t)&&Pr(t)==g}function jr(t,e,n,i,a){return t===e||(null==t||null==e||!to(t)&&!to(e)?t!=t&&e!=e:function(t,e,n,i,a,s){var o=Ns(t),u=Ns(e),l=o?y:pa(t),c=u?y:pa(e),h=(l=l==g?S:l)==S,f=(c=c==g?S:c)==S,d=l==c;if(d&&Gs(t)){if(!Gs(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new Qn),o||uo(t)?ea(t,e,n,i,a,s):function(t,e,n,r,i,a,s){switch(n){case T:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R:return!(t.byteLength!=e.byteLength||!a(new Xt(t),new Xt(e)));case b:case w:case P:return Ws(+t,+e);case k:return t.name==e.name&&t.message==e.message;case I:case E:return t==e+"";case C:var o=un;case M:var u=1&r;if(o||(o=hn),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var c=ea(o(t),o(e),r,i,a,s);return s.delete(t),c;case O:if(zn)return zn.call(t)==zn.call(e)}return!1}(t,e,l,n,i,a,s);if(!(1&n)){var p=h&&Dt.call(t,"__wrapped__"),v=f&&Dt.call(e,"__wrapped__");if(p||v){var m=p?t.value():t,_=v?e.value():e;return s||(s=new Qn),a(m,_,n,i,s)}}return!!d&&(s||(s=new Qn),function(t,e,n,i,a,s){var o=1&n,u=ra(t),l=u.length,c=ra(e),h=c.length;if(l!=h&&!o)return!1;var f=l;for(;f--;){var d=u[f];if(!(o?d in e:Dt.call(e,d)))return!1}var p=s.get(t),v=s.get(e);if(p&&v)return p==e&&v==t;var m=!0;s.set(t,e),s.set(e,t);var g=o;for(;++f<l;){var y=t[d=u[f]],b=e[d];if(i)var w=o?i(b,y,d,e,t,s):i(y,b,d,t,e,s);if(!(w===r?y===b||a(y,b,n,i,s):w)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var k=t.constructor,_=e.constructor;k==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof k&&k instanceof k&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(t),s.delete(e),m}(t,e,n,i,a,s))}(t,e,n,i,jr,a))}function Rr(t,e,n,i){var a=n.length,s=a,o=!i;if(null==t)return!s;for(t=xt(t);a--;){var u=n[a];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<s;){var l=(u=n[a])[0],c=t[l],h=u[1];if(o&&u[2]){if(c===r&&!(l in t))return!1}else{var f=new Qn;if(i)var d=i(c,h,l,t,e,f);if(!(d===r?jr(h,c,3,i,f):d))return!1}}return!0}function Tr(t){return!(!Ks(t)||(e=t,zt&&zt in e))&&(Zs(t)?Vt:gt).test(Ba(t));var e}function Lr(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Ns(t)?Ur(t[0],t[1]):Fr(t):fu(t)}function Dr(t){if(!Aa(t))return gn(t);var e=[];for(var n in xt(t))Dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Br(t){if(!Ks(t))return function(t){var e=[];if(null!=t)for(var n in xt(t))e.push(n);return e}(t);var e=Aa(t),n=[];for(var r in t)("constructor"!=r||!e&&Dt.call(t,r))&&n.push(r);return n}function zr(t,e){return t<e}function Wr(t,e){var n=-1,r=Xs(t)?st(t.length):[];return fr(t,(function(t,i,a){r[++n]=e(t,i,a)})),r}function Fr(t){var e=ca(t);return 1==e.length&&e[0][2]?Pa(e[0][0],e[0][1]):function(n){return n===t||Rr(n,t,e)}}function Ur(t,e){return wa(t)&&Ca(e)?Pa(Da(t),e):function(n){var i=So(n,t);return i===r&&i===e?xo(n,t):jr(e,i,3)}}function Vr(t,e,n,i,a){t!==e&&yr(e,(function(s,o){if(a||(a=new Qn),Ks(s))!function(t,e,n,i,a,s,o){var u=Ia(t,n),l=Ia(e,n),c=o.get(l);if(c)return void tr(t,n,c);var h=s?s(u,l,n+"",t,e,o):r,f=h===r;if(f){var d=Ns(l),p=!d&&Gs(l),v=!d&&!p&&uo(l);h=l,d||p||v?Ns(u)?h=u:qs(u)?h=Mi(u):p?(f=!1,h=Ai(l,!0)):v?(f=!1,h=Pi(l,!0)):h=[]:ro(l)||Vs(l)?(h=u,Vs(u)?h=go(u):Ks(u)&&!Zs(u)||(h=ma(l))):f=!1}f&&(o.set(l,h),a(h,l,i,s,o),o.delete(l));tr(t,n,h)}(t,e,o,n,Vr,i,a);else{var u=i?i(Ia(t,o),s,o+"",t,e,a):r;u===r&&(u=s),tr(t,o,u)}}),jo)}function Nr(t,e){var n=t.length;if(n)return ya(e+=e<0?n:0,n)?t[e]:r}function Hr(t,e,n){e=e.length?Te(e,(function(t){return Ns(t)?function(e){return Ar(e,1===t.length?t[0]:t)}:t})):[ru];var r=-1;e=Te(e,Je(ua()));var i=Wr(t,(function(t,n,i){var a=Te(e,(function(e){return e(t)}));return{criteria:a,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;for(;++r<s;){var u=Si(i[r],a[r]);if(u)return r>=o?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Xr(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var s=e[r],o=Ar(t,s);n(o,s)&&Kr(a,bi(s,t),o)}return a}function qr(t,e,n,r){var i=r?Ne:Ve,a=-1,s=e.length,o=t;for(t===e&&(e=Mi(e)),n&&(o=Te(t,Je(n)));++a<s;)for(var u=0,l=e[a],c=n?n(l):l;(u=i(o,c,u,r))>-1;)o!==t&&Zt.call(o,u,1),Zt.call(t,u,1);return t}function Gr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;ya(i)?Zt.call(t,i,1):hi(t,i)}}return t}function $r(t,e){return t+me(_n()*(e-t+1))}function Qr(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=me(e/2))&&(t+=t)}while(e);return n}function Zr(t,e){return Oa(Sa(t,e,ru),t+"")}function Yr(t){return Yn(Fo(t))}function Jr(t,e){var n=Fo(t);return Ta(n,or(e,0,n.length))}function Kr(t,e,n,i){if(!Ks(t))return t;for(var a=-1,s=(e=bi(e,t)).length,o=s-1,u=t;null!=u&&++a<s;){var l=Da(e[a]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(a!=o){var h=u[l];(c=i?i(h,l,u):r)===r&&(c=Ks(h)?h:ya(e[a+1])?[]:{})}er(u,l,c),u=u[l]}return t}var ti=En?function(t,e){return En.set(t,e),t}:ru,ei=re?function(t,e){return re(t,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:ru;function ni(t){return Ta(Fo(t))}function ri(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=st(i);++r<i;)a[r]=t[r+e];return a}function ii(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var a=r+i>>>1,s=t[a];null!==s&&!oo(s)&&(n?s<=e:s<e)?r=a+1:i=a}return i}return si(t,e,ru,n)}function si(t,e,n,i){var a=0,s=null==t?0:t.length;if(0===s)return 0;for(var o=(e=n(e))!=e,u=null===e,l=oo(e),c=e===r;a<s;){var h=me((a+s)/2),f=n(t[h]),d=f!==r,p=null===f,v=f==f,m=oo(f);if(o)var g=i||v;else g=c?v&&(i||d):u?v&&d&&(i||!p):l?v&&d&&!p&&(i||!m):!p&&!m&&(i?f<=e:f<e);g?a=h+1:s=h}return bn(s,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var s=t[n],o=e?e(s):s;if(!n||!Ws(o,u)){var u=o;a[i++]=0===s?0:s}}return a}function ui(t){return"number"==typeof t?t:oo(t)?p:+t}function li(t){if("string"==typeof t)return t;if(Ns(t))return Te(t,li)+"";if(oo(t))return Wn?Wn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ci(t,e,n){var r=-1,i=je,a=t.length,s=!0,o=[],u=o;if(n)s=!1,i=Re;else if(a>=200){var l=e?null:Qi(t);if(l)return hn(l);s=!1,i=tn,u=new $n}else u=e?[]:o;t:for(;++r<a;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),o.push(c)}else i(u,h,n)||(u!==o&&u.push(h),o.push(c))}return o}function hi(t,e){return null==(t=xa(t,e=bi(e,t)))||delete t[Da(Qa(e))]}function fi(t,e,n,r){return Kr(t,e,n(Ar(t,e)),r)}function di(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?ri(t,r?0:a,r?a+1:i):ri(t,r?a+1:0,r?i:a)}function pi(t,e){var n=t;return n instanceof Hn&&(n=n.value()),De(e,(function(t,e){return e.func.apply(e.thisArg,Le([t],e.args))}),n)}function vi(t,e,n){var r=t.length;if(r<2)return r?ci(t[0]):[];for(var i=-1,a=st(r);++i<r;)for(var s=t[i],o=-1;++o<r;)o!=i&&(a[i]=hr(a[i]||s,t[o],e,n));return ci(gr(a,1),e,n)}function mi(t,e,n){for(var i=-1,a=t.length,s=e.length,o={};++i<a;){var u=i<s?e[i]:r;n(o,t[i],u)}return o}function gi(t){return qs(t)?t:[]}function yi(t){return"function"==typeof t?t:ru}function bi(t,e){return Ns(t)?t:wa(t,e)?[t]:La(yo(t))}var wi=Zr;function ki(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:ri(t,e,n)}var _i=le||function(t){return pe.clearTimeout(t)};function Ai(t,e){if(e)return t.slice();var n=t.length,r=qt?qt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Xt(e).set(new Xt(t)),e}function Pi(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Si(t,e){if(t!==e){var n=t!==r,i=null===t,a=t==t,s=oo(t),o=e!==r,u=null===e,l=e==e,c=oo(e);if(!u&&!c&&!s&&t>e||s&&o&&l&&!u&&!c||i&&o&&l||!n&&l||!a)return 1;if(!i&&!s&&!c&&t<e||c&&n&&a&&!i&&!s||u&&n&&a||!o&&a||!l)return-1}return 0}function xi(t,e,n,r){for(var i=-1,a=t.length,s=n.length,o=-1,u=e.length,l=yn(a-s,0),c=st(u+l),h=!r;++o<u;)c[o]=e[o];for(;++i<s;)(h||i<a)&&(c[n[i]]=t[i]);for(;l--;)c[o++]=t[i++];return c}function Ii(t,e,n,r){for(var i=-1,a=t.length,s=-1,o=n.length,u=-1,l=e.length,c=yn(a-o,0),h=st(c+l),f=!r;++i<c;)h[i]=t[i];for(var d=i;++u<l;)h[d+u]=e[u];for(;++s<o;)(f||i<a)&&(h[d+n[s]]=t[i++]);return h}function Mi(t,e){var n=-1,r=t.length;for(e||(e=st(r));++n<r;)e[n]=t[n];return e}function Ei(t,e,n,i){var a=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var u=e[s],l=i?i(n[u],t[u],u,n,t):r;l===r&&(l=t[u]),a?ar(n,u,l):er(n,u,l)}return n}function Oi(t,e){return function(n,r){var i=Ns(n)?xe:rr,a=e?e():{};return i(n,t,ua(r,2),a)}}function ji(t){return Zr((function(e,n){var i=-1,a=n.length,s=a>1?n[a-1]:r,o=a>2?n[2]:r;for(s=t.length>3&&"function"==typeof s?(a--,s):r,o&&ba(n[0],n[1],o)&&(s=a<3?r:s,a=1),e=xt(e);++i<a;){var u=n[i];u&&t(e,u,i,s)}return e}))}function Ri(t,e){return function(n,r){if(null==n)return n;if(!Xs(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=xt(n);(e?a--:++a<i)&&!1!==r(s[a],a,s););return n}}function Ti(t){return function(e,n,r){for(var i=-1,a=xt(e),s=r(e),o=s.length;o--;){var u=s[t?o:++i];if(!1===n(a[u],u,a))break}return e}}function Li(t){return function(e){var n=on(e=yo(e))?dn(e):r,i=n?n[0]:e.charAt(0),a=n?ki(n,1).join(""):e.slice(1);return i[t]()+a}}function Di(t){return function(e){return De(Yo(No(e).replace(Kt,"")),t,"")}}function Bi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),r=t.apply(n,e);return Ks(r)?r:n}}function zi(t){return function(e,n,i){var a=xt(e);if(!Xs(e)){var s=ua(n,3);e=Oo(e),n=function(t){return s(a[t],t,a)}}var o=t(e,n,i);return o>-1?a[s?e[o]:o]:r}}function Wi(t){return na((function(e){var n=e.length,a=n,s=Nn.prototype.thru;for(t&&e.reverse();a--;){var o=e[a];if("function"!=typeof o)throw new Et(i);if(s&&!u&&"wrapper"==sa(o))var u=new Nn([],!0)}for(a=u?a:n;++a<n;){var l=sa(o=e[a]),c="wrapper"==l?aa(o):r;u=c&&ka(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[sa(c[0])].apply(u,c[3]):1==o.length&&ka(o)?u[l]():u.thru(o)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ns(r))return u.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}}))}function Fi(t,e,n,i,a,s,o,u,l,h){var f=e&c,d=1&e,p=2&e,v=24&e,m=512&e,g=p?r:Bi(t);return function c(){for(var y=arguments.length,b=st(y),w=y;w--;)b[w]=arguments[w];if(v)var k=oa(c),_=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,k);if(i&&(b=xi(b,i,a,v)),s&&(b=Ii(b,s,o,v)),y-=_,v&&y<h){var A=cn(b,k);return Gi(t,e,Fi,c.placeholder,n,b,A,u,l,h-y)}var C=d?n:this,P=p?C[t]:t;return y=b.length,u?b=function(t,e){var n=t.length,i=bn(e.length,n),a=Mi(t);for(;i--;){var s=e[i];t[i]=ya(s,n)?a[s]:r}return t}(b,u):m&&y>1&&b.reverse(),f&&l<y&&(b.length=l),this&&this!==pe&&this instanceof c&&(P=g||Bi(P)),P.apply(C,b)}}function Ui(t,e){return function(n,r){return function(t,e,n,r){return wr(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function Vi(t,e){return function(n,i){var a;if(n===r&&i===r)return e;if(n!==r&&(a=n),i!==r){if(a===r)return i;"string"==typeof n||"string"==typeof i?(n=li(n),i=li(i)):(n=ui(n),i=ui(i)),a=t(n,i)}return a}}function Ni(t){return na((function(e){return e=Te(e,Je(ua())),Zr((function(n){var r=this;return t(e,(function(t){return Se(t,r,n)}))}))}))}function Hi(t,e){var n=(e=e===r?" ":li(e)).length;if(n<2)return n?Qr(e,t):e;var i=Qr(e,ve(t/fn(e)));return on(e)?ki(dn(i),0,t).join(""):i.slice(0,t)}function Xi(t){return function(e,n,i){return i&&"number"!=typeof i&&ba(e,n,i)&&(n=i=r),e=fo(e),n===r?(n=e,e=0):n=fo(n),function(t,e,n,r){for(var i=-1,a=yn(ve((e-t)/(n||1)),0),s=st(a);a--;)s[r?a:++i]=t,t+=n;return s}(e,n,i=i===r?e<n?1:-1:fo(i),t)}}function qi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=mo(e),n=mo(n)),t(e,n)}}function Gi(t,e,n,i,a,s,o,c,h,f){var d=8&e;e|=d?u:l,4&(e&=~(d?l:u))||(e&=-4);var p=[t,e,a,d?s:r,d?o:r,d?r:s,d?r:o,c,h,f],v=n.apply(r,p);return ka(t)&&Ma(v,p),v.placeholder=i,ja(v,t,e)}function $i(t){var e=St[t];return function(t,n){if(t=mo(t),(n=null==n?0:bn(po(n),292))&&We(t)){var r=(yo(t)+"e").split("e");return+((r=(yo(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Qi=xn&&1/hn(new xn([,-0]))[1]==f?function(t){return new xn(t)}:uu;function Zi(t){return function(e){var n=pa(e);return n==C?un(e):n==M?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return Te(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yi(t,e,n,a,f,d,p,v){var m=2&e;if(!m&&"function"!=typeof t)throw new Et(i);var g=a?a.length:0;if(g||(e&=-97,a=f=r),p=p===r?p:yn(po(p),0),v=v===r?v:po(v),g-=f?f.length:0,e&l){var y=a,b=f;a=f=r}var w=m?r:aa(t),k=[t,e,n,a,f,y,b,d,p,v];if(w&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<131,o=r==c&&8==n||r==c&&n==h&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?xi(l,u,e[4]):u,t[4]=l?cn(t[3],s):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Ii(l,u,e[6]):u,t[6]=l?cn(t[5],s):e[6]);(u=e[7])&&(t[7]=u);r&c&&(t[8]=null==t[8]?e[8]:bn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(k,w),t=k[0],e=k[1],n=k[2],a=k[3],f=k[4],!(v=k[9]=k[9]===r?m?0:t.length:yn(k[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||e==o?function(t,e,n){var i=Bi(t);return function a(){for(var s=arguments.length,o=st(s),u=s,l=oa(a);u--;)o[u]=arguments[u];var c=s<3&&o[0]!==l&&o[s-1]!==l?[]:cn(o,l);return(s-=c.length)<n?Gi(t,e,Fi,a.placeholder,r,o,c,r,r,n-s):Se(this&&this!==pe&&this instanceof a?i:t,this,o)}}(t,e,v):e!=u&&33!=e||f.length?Fi.apply(r,k):function(t,e,n,r){var i=1&e,a=Bi(t);return function e(){for(var s=-1,o=arguments.length,u=-1,l=r.length,c=st(l+o),h=this&&this!==pe&&this instanceof e?a:t;++u<l;)c[u]=r[u];for(;o--;)c[u++]=arguments[++s];return Se(h,i?n:this,c)}}(t,e,n,a);else var _=function(t,e,n){var r=1&e,i=Bi(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return ja((w?ti:Ma)(_,k),t,e)}function Ji(t,e,n,i){return t===r||Ws(t,Rt[n])&&!Dt.call(i,n)?e:t}function Ki(t,e,n,i,a,s){return Ks(t)&&Ks(e)&&(s.set(e,t),Vr(t,e,r,Ki,s),s.delete(e)),t}function ta(t){return ro(t)?r:t}function ea(t,e,n,i,a,s){var o=1&n,u=t.length,l=e.length;if(u!=l&&!(o&&l>u))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var f=-1,d=!0,p=2&n?new $n:r;for(s.set(t,e),s.set(e,t);++f<u;){var v=t[f],m=e[f];if(i)var g=o?i(m,v,f,e,t,s):i(v,m,f,t,e,s);if(g!==r){if(g)continue;d=!1;break}if(p){if(!ze(e,(function(t,e){if(!tn(p,e)&&(v===t||a(v,t,n,i,s)))return p.push(e)}))){d=!1;break}}else if(v!==m&&!a(v,m,n,i,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function na(t){return Oa(Sa(t,r,Ha),t+"")}function ra(t){return Cr(t,Oo,fa)}function ia(t){return Cr(t,jo,da)}var aa=En?function(t){return En.get(t)}:uu;function sa(t){for(var e=t.name+"",n=On[e],r=Dt.call(On,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function oa(t){return(Dt.call(Fn,"placeholder")?Fn:t).placeholder}function ua(){var t=Fn.iteratee||iu;return t=t===iu?Lr:t,arguments.length?t(arguments[0],arguments[1]):t}function la(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ca(t){for(var e=Oo(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ca(i)]}return e}function ha(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Tr(n)?n:r}var fa=ye?function(t){return null==t?[]:(t=xt(t),Oe(ye(t),(function(e){return Qt.call(t,e)})))}:vu,da=ye?function(t){for(var e=[];t;)Le(e,fa(t)),t=Gt(t);return e}:vu,pa=Pr;function va(t,e,n){for(var r=-1,i=(e=bi(e,t)).length,a=!1;++r<i;){var s=Da(e[r]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Js(i)&&ya(s,i)&&(Ns(t)||Vs(t))}function ma(t){return"function"!=typeof t.constructor||Aa(t)?{}:Un(Gt(t))}function ga(t){return Ns(t)||Vs(t)||!!(Yt&&t&&t[Yt])}function ya(t,e){var n=typeof t;return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&bt.test(t))&&t>-1&&t%1==0&&t<e}function ba(t,e,n){if(!Ks(n))return!1;var r=typeof e;return!!("number"==r?Xs(n)&&ya(e,n.length):"string"==r&&e in n)&&Ws(n[e],t)}function wa(t,e){if(Ns(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!oo(t))||(et.test(t)||!tt.test(t)||null!=e&&t in xt(e))}function ka(t){var e=sa(t),n=Fn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var r=aa(n);return!!r&&t===r[0]}(Cn&&pa(new Cn(new ArrayBuffer(1)))!=T||Pn&&pa(new Pn)!=C||Sn&&pa(Sn.resolve())!=x||xn&&pa(new xn)!=M||In&&pa(new In)!=j)&&(pa=function(t){var e=Pr(t),n=e==S?t.constructor:r,i=n?Ba(n):"";if(i)switch(i){case jn:return T;case Rn:return C;case Tn:return x;case Ln:return M;case Dn:return j}return e});var _a=Tt?Zs:mu;function Aa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function Ca(t){return t==t&&!Ks(t)}function Pa(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in xt(n)))}}function Sa(t,e,n){return e=yn(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=yn(r.length-e,0),s=st(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=st(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),Se(t,this,o)}}function xa(t,e){return e.length<2?t:Ar(t,ri(e,0,-1))}function Ia(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ma=Ra(ti),Ea=de||function(t,e){return pe.setTimeout(t,e)},Oa=Ra(ei);function ja(t,e,n){var r=e+"";return Oa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ie(m,(function(n){var r="_."+n[0];e&n[1]&&!je(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(lt):[]}(r),n)))}function Ra(t){var e=0,n=0;return function(){var i=wn(),a=16-(i-n);if(n=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Ta(t,e){var n=-1,i=t.length,a=i-1;for(e=e===r?i:e;++n<e;){var s=$r(n,a),o=t[s];t[s]=t[n],t[n]=o}return t.length=e,t}var La=function(t){var e=Rs(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}));function Da(t){if("string"==typeof t||oo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ba(t){if(null!=t){try{return Lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function za(t){if(t instanceof Hn)return t.clone();var e=new Nn(t.__wrapped__,t.__chain__);return e.__actions__=Mi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Wa=Zr((function(t,e){return qs(t)?hr(t,gr(e,1,qs,!0)):[]})),Fa=Zr((function(t,e){var n=Qa(e);return qs(n)&&(n=r),qs(t)?hr(t,gr(e,1,qs,!0),ua(n,2)):[]})),Ua=Zr((function(t,e){var n=Qa(e);return qs(n)&&(n=r),qs(t)?hr(t,gr(e,1,qs,!0),r,n):[]}));function Va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=yn(r+i,0)),Ue(t,ua(e,3),i)}function Na(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i-1;return n!==r&&(a=po(n),a=n<0?yn(i+a,0):bn(a,i-1)),Ue(t,ua(e,3),a,!0)}function Ha(t){return(null==t?0:t.length)?gr(t,1):[]}function Xa(t){return t&&t.length?t[0]:r}var qa=Zr((function(t){var e=Te(t,gi);return e.length&&e[0]===t[0]?Mr(e):[]})),Ga=Zr((function(t){var e=Qa(t),n=Te(t,gi);return e===Qa(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Mr(n,ua(e,2)):[]})),$a=Zr((function(t){var e=Qa(t),n=Te(t,gi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Mr(n,r,e):[]}));function Qa(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Za=Zr(Ya);function Ya(t,e){return t&&t.length&&e&&e.length?qr(t,e):t}var Ja=na((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Gr(t,Te(e,(function(t){return ya(t,n)?+t:t})).sort(Si)),r}));function Ka(t){return null==t?t:An.call(t)}var ts=Zr((function(t){return ci(gr(t,1,qs,!0))})),es=Zr((function(t){var e=Qa(t);return qs(e)&&(e=r),ci(gr(t,1,qs,!0),ua(e,2))})),ns=Zr((function(t){var e=Qa(t);return e="function"==typeof e?e:r,ci(gr(t,1,qs,!0),r,e)}));function rs(t){if(!t||!t.length)return[];var e=0;return t=Oe(t,(function(t){if(qs(t))return e=yn(t.length,e),!0})),Ze(e,(function(e){return Te(t,qe(e))}))}function is(t,e){if(!t||!t.length)return[];var n=rs(t);return null==e?n:Te(n,(function(t){return Se(e,r,t)}))}var as=Zr((function(t,e){return qs(t)?hr(t,e):[]})),ss=Zr((function(t){return vi(Oe(t,qs))})),os=Zr((function(t){var e=Qa(t);return qs(e)&&(e=r),vi(Oe(t,qs),ua(e,2))})),us=Zr((function(t){var e=Qa(t);return e="function"==typeof e?e:r,vi(Oe(t,qs),r,e)})),ls=Zr(rs);var cs=Zr((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,is(t,n)}));function hs(t){var e=Fn(t);return e.__chain__=!0,e}function fs(t,e){return e(t)}var ds=na((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return sr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Hn&&ya(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:fs,args:[a],thisArg:r}),new Nn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(a)}));var ps=Oi((function(t,e,n){Dt.call(t,n)?++t[n]:ar(t,n,1)}));var vs=zi(Va),ms=zi(Na);function gs(t,e){return(Ns(t)?Ie:fr)(t,ua(e,3))}function ys(t,e){return(Ns(t)?Me:dr)(t,ua(e,3))}var bs=Oi((function(t,e,n){Dt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var ws=Zr((function(t,e,n){var r=-1,i="function"==typeof e,a=Xs(t)?st(t.length):[];return fr(t,(function(t){a[++r]=i?Se(e,t,n):Er(t,e,n)})),a})),ks=Oi((function(t,e,n){ar(t,n,e)}));function _s(t,e){return(Ns(t)?Te:Wr)(t,ua(e,3))}var As=Oi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Cs=Zr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ba(t,e[0],e[1])?e=[]:n>2&&ba(e[0],e[1],e[2])&&(e=[e[0]]),Hr(t,gr(e,1),[])})),Ps=fe||function(){return pe.Date.now()};function Ss(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Yi(t,c,r,r,r,r,e)}function xs(t,e){var n;if("function"!=typeof e)throw new Et(i);return t=po(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Is=Zr((function(t,e,n){var r=1;if(n.length){var i=cn(n,oa(Is));r|=u}return Yi(t,r,e,n,i)})),Ms=Zr((function(t,e,n){var r=3;if(n.length){var i=cn(n,oa(Ms));r|=u}return Yi(e,r,t,n,i)}));function Es(t,e,n){var a,s,o,u,l,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Et(i);function v(e){var n=a,i=s;return a=s=r,h=e,u=t.apply(i,n)}function m(t){var n=t-c;return c===r||n>=e||n<0||d&&t-h>=o}function g(){var t=Ps();if(m(t))return y(t);l=Ea(g,function(t){var n=e-(t-c);return d?bn(n,o-(t-h)):n}(t))}function y(t){return l=r,p&&a?v(t):(a=s=r,u)}function b(){var t=Ps(),n=m(t);if(a=arguments,s=this,c=t,n){if(l===r)return function(t){return h=t,l=Ea(g,e),f?v(t):u}(c);if(d)return _i(l),l=Ea(g,e),v(c)}return l===r&&(l=Ea(g,e)),u}return e=mo(e)||0,Ks(n)&&(f=!!n.leading,o=(d="maxWait"in n)?yn(mo(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==r&&_i(l),h=0,a=c=s=l=r},b.flush=function(){return l===r?u:y(Ps())},b}var Os=Zr((function(t,e){return cr(t,1,e)})),js=Zr((function(t,e,n){return cr(t,mo(e)||0,n)}));function Rs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Et(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(Rs.Cache||Gn),n}function Ts(t){if("function"!=typeof t)throw new Et(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Rs.Cache=Gn;var Ls=wi((function(t,e){var n=(e=1==e.length&&Ns(e[0])?Te(e[0],Je(ua())):Te(gr(e,1),Je(ua()))).length;return Zr((function(r){for(var i=-1,a=bn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Se(t,this,r)}))})),Ds=Zr((function(t,e){var n=cn(e,oa(Ds));return Yi(t,u,r,e,n)})),Bs=Zr((function(t,e){var n=cn(e,oa(Bs));return Yi(t,l,r,e,n)})),zs=na((function(t,e){return Yi(t,h,r,r,r,e)}));function Ws(t,e){return t===e||t!=t&&e!=e}var Fs=qi(Sr),Us=qi((function(t,e){return t>=e})),Vs=Or(function(){return arguments}())?Or:function(t){return to(t)&&Dt.call(t,"callee")&&!Qt.call(t,"callee")},Ns=st.isArray,Hs=we?Je(we):function(t){return to(t)&&Pr(t)==R};function Xs(t){return null!=t&&Js(t.length)&&!Zs(t)}function qs(t){return to(t)&&Xs(t)}var Gs=be||mu,$s=ke?Je(ke):function(t){return to(t)&&Pr(t)==w};function Qs(t){if(!to(t))return!1;var e=Pr(t);return e==k||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ro(t)}function Zs(t){if(!Ks(t))return!1;var e=Pr(t);return e==_||e==A||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ys(t){return"number"==typeof t&&t==po(t)}function Js(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function Ks(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function to(t){return null!=t&&"object"==typeof t}var eo=_e?Je(_e):function(t){return to(t)&&pa(t)==C};function no(t){return"number"==typeof t||to(t)&&Pr(t)==P}function ro(t){if(!to(t)||Pr(t)!=S)return!1;var e=Gt(t);if(null===e)return!0;var n=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==Ft}var io=Ae?Je(Ae):function(t){return to(t)&&Pr(t)==I};var ao=Ce?Je(Ce):function(t){return to(t)&&pa(t)==M};function so(t){return"string"==typeof t||!Ns(t)&&to(t)&&Pr(t)==E}function oo(t){return"symbol"==typeof t||to(t)&&Pr(t)==O}var uo=Pe?Je(Pe):function(t){return to(t)&&Js(t.length)&&!!oe[Pr(t)]};var lo=qi(zr),co=qi((function(t,e){return t<=e}));function ho(t){if(!t)return[];if(Xs(t))return so(t)?dn(t):Mi(t);if(Jt&&t[Jt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Jt]());var e=pa(t);return(e==C?un:e==M?hn:Fo)(t)}function fo(t){return t?(t=mo(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function po(t){var e=fo(t),n=e%1;return e==e?n?e-n:e:0}function vo(t){return t?or(po(t),0,v):0}function mo(t){if("number"==typeof t)return t;if(oo(t))return p;if(Ks(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ks(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ye(t);var n=mt.test(t);return n||yt.test(t)?he(t.slice(2),n?2:8):vt.test(t)?p:+t}function go(t){return Ei(t,jo(t))}function yo(t){return null==t?"":li(t)}var bo=ji((function(t,e){if(Aa(e)||Xs(e))Ei(e,Oo(e),t);else for(var n in e)Dt.call(e,n)&&er(t,n,e[n])})),wo=ji((function(t,e){Ei(e,jo(e),t)})),ko=ji((function(t,e,n,r){Ei(e,jo(e),t,r)})),_o=ji((function(t,e,n,r){Ei(e,Oo(e),t,r)})),Ao=na(sr);var Co=Zr((function(t,e){t=xt(t);var n=-1,i=e.length,a=i>2?e[2]:r;for(a&&ba(e[0],e[1],a)&&(i=1);++n<i;)for(var s=e[n],o=jo(s),u=-1,l=o.length;++u<l;){var c=o[u],h=t[c];(h===r||Ws(h,Rt[c])&&!Dt.call(t,c))&&(t[c]=s[c])}return t})),Po=Zr((function(t){return t.push(r,Ki),Se(To,r,t)}));function So(t,e,n){var i=null==t?r:Ar(t,e);return i===r?n:i}function xo(t,e){return null!=t&&va(t,e,Ir)}var Io=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),t[e]=n}),tu(ru)),Mo=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),Dt.call(t,e)?t[e].push(n):t[e]=[n]}),ua),Eo=Zr(Er);function Oo(t){return Xs(t)?Zn(t):Dr(t)}function jo(t){return Xs(t)?Zn(t,!0):Br(t)}var Ro=ji((function(t,e,n){Vr(t,e,n)})),To=ji((function(t,e,n,r){Vr(t,e,n,r)})),Lo=na((function(t,e){var n={};if(null==t)return n;var r=!1;e=Te(e,(function(e){return e=bi(e,t),r||(r=e.length>1),e})),Ei(t,ia(t),n),r&&(n=ur(n,7,ta));for(var i=e.length;i--;)hi(n,e[i]);return n}));var Do=na((function(t,e){return null==t?{}:function(t,e){return Xr(t,e,(function(e,n){return xo(t,n)}))}(t,e)}));function Bo(t,e){if(null==t)return{};var n=Te(ia(t),(function(t){return[t]}));return e=ua(e),Xr(t,n,(function(t,n){return e(t,n[0])}))}var zo=Zi(Oo),Wo=Zi(jo);function Fo(t){return null==t?[]:Ke(t,Oo(t))}var Uo=Di((function(t,e,n){return e=e.toLowerCase(),t+(n?Vo(e):e)}));function Vo(t){return Zo(yo(t).toLowerCase())}function No(t){return(t=yo(t))&&t.replace(wt,rn).replace(te,"")}var Ho=Di((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Xo=Di((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qo=Li("toLowerCase");var Go=Di((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var $o=Di((function(t,e,n){return t+(n?" ":"")+Zo(e)}));var Qo=Di((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Zo=Li("toUpperCase");function Yo(t,e,n){return t=yo(t),(e=n?r:e)===r?function(t){return ie.test(t)}(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.match(ct)||[]}(t):t.match(e)||[]}var Jo=Zr((function(t,e){try{return Se(t,r,e)}catch(t){return Qs(t)?t:new Ct(t)}})),Ko=na((function(t,e){return Ie(e,(function(e){e=Da(e),ar(t,e,Is(t[e],t))})),t}));function tu(t){return function(){return t}}var eu=Wi(),nu=Wi(!0);function ru(t){return t}function iu(t){return Lr("function"==typeof t?t:ur(t,1))}var au=Zr((function(t,e){return function(n){return Er(n,t,e)}})),su=Zr((function(t,e){return function(n){return Er(t,n,e)}}));function ou(t,e,n){var r=Oo(e),i=_r(e,r);null!=n||Ks(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,Oo(e)));var a=!(Ks(n)&&"chain"in n&&!n.chain),s=Zs(t);return Ie(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=Mi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Le([this.value()],arguments))})})),t}function uu(){}var lu=Ni(Te),cu=Ni(Ee),hu=Ni(ze);function fu(t){return wa(t)?qe(Da(t)):function(t){return function(e){return Ar(e,t)}}(t)}var du=Xi(),pu=Xi(!0);function vu(){return[]}function mu(){return!1}var gu=Vi((function(t,e){return t+e}),0),yu=$i("ceil"),bu=Vi((function(t,e){return t/e}),1),wu=$i("floor");var ku,_u=Vi((function(t,e){return t*e}),1),Au=$i("round"),Cu=Vi((function(t,e){return t-e}),0);return Fn.after=function(t,e){if("function"!=typeof e)throw new Et(i);return t=po(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=Ss,Fn.assign=bo,Fn.assignIn=wo,Fn.assignInWith=ko,Fn.assignWith=_o,Fn.at=Ao,Fn.before=xs,Fn.bind=Is,Fn.bindAll=Ko,Fn.bindKey=Ms,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ns(t)?t:[t]},Fn.chain=hs,Fn.chunk=function(t,e,n){e=(n?ba(t,e,n):e===r)?1:yn(po(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,o=st(ve(i/e));a<i;)o[s++]=ri(t,a,a+=e);return o},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=st(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Le(Ns(n)?Mi(n):[n],gr(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=ua();return t=e?Te(t,(function(t){if("function"!=typeof t[1])throw new Et(i);return[n(t[0]),t[1]]})):[],Zr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Se(i[0],this,n))return Se(i[1],this,n)}}))},Fn.conforms=function(t){return function(t){var e=Oo(t);return function(n){return lr(n,t,e)}}(ur(t,1))},Fn.constant=tu,Fn.countBy=ps,Fn.create=function(t,e){var n=Un(t);return null==e?n:ir(n,e)},Fn.curry=function t(e,n,i){var a=Yi(e,8,r,r,r,r,r,n=i?r:n);return a.placeholder=t.placeholder,a},Fn.curryRight=function t(e,n,i){var a=Yi(e,o,r,r,r,r,r,n=i?r:n);return a.placeholder=t.placeholder,a},Fn.debounce=Es,Fn.defaults=Co,Fn.defaultsDeep=Po,Fn.defer=Os,Fn.delay=js,Fn.difference=Wa,Fn.differenceBy=Fa,Fn.differenceWith=Ua,Fn.drop=function(t,e,n){var i=null==t?0:t.length;return i?ri(t,(e=n||e===r?1:po(e))<0?0:e,i):[]},Fn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?ri(t,0,(e=i-(e=n||e===r?1:po(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?di(t,ua(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?di(t,ua(e,3),!0):[]},Fn.fill=function(t,e,n,i){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&ba(t,e,n)&&(n=0,i=a),function(t,e,n,i){var a=t.length;for((n=po(n))<0&&(n=-n>a?0:a+n),(i=i===r||i>a?a:po(i))<0&&(i+=a),i=n>i?0:vo(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Fn.filter=function(t,e){return(Ns(t)?Oe:mr)(t,ua(e,3))},Fn.flatMap=function(t,e){return gr(_s(t,e),1)},Fn.flatMapDeep=function(t,e){return gr(_s(t,e),f)},Fn.flatMapDepth=function(t,e,n){return n=n===r?1:po(n),gr(_s(t,e),n)},Fn.flatten=Ha,Fn.flattenDeep=function(t){return(null==t?0:t.length)?gr(t,f):[]},Fn.flattenDepth=function(t,e){return(null==t?0:t.length)?gr(t,e=e===r?1:po(e)):[]},Fn.flip=function(t){return Yi(t,512)},Fn.flow=eu,Fn.flowRight=nu,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Fn.functions=function(t){return null==t?[]:_r(t,Oo(t))},Fn.functionsIn=function(t){return null==t?[]:_r(t,jo(t))},Fn.groupBy=bs,Fn.initial=function(t){return(null==t?0:t.length)?ri(t,0,-1):[]},Fn.intersection=qa,Fn.intersectionBy=Ga,Fn.intersectionWith=$a,Fn.invert=Io,Fn.invertBy=Mo,Fn.invokeMap=ws,Fn.iteratee=iu,Fn.keyBy=ks,Fn.keys=Oo,Fn.keysIn=jo,Fn.map=_s,Fn.mapKeys=function(t,e){var n={};return e=ua(e,3),wr(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},Fn.mapValues=function(t,e){var n={};return e=ua(e,3),wr(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},Fn.matches=function(t){return Fr(ur(t,1))},Fn.matchesProperty=function(t,e){return Ur(t,ur(e,1))},Fn.memoize=Rs,Fn.merge=Ro,Fn.mergeWith=To,Fn.method=au,Fn.methodOf=su,Fn.mixin=ou,Fn.negate=Ts,Fn.nthArg=function(t){return t=po(t),Zr((function(e){return Nr(e,t)}))},Fn.omit=Lo,Fn.omitBy=function(t,e){return Bo(t,Ts(ua(e)))},Fn.once=function(t){return xs(2,t)},Fn.orderBy=function(t,e,n,i){return null==t?[]:(Ns(e)||(e=null==e?[]:[e]),Ns(n=i?r:n)||(n=null==n?[]:[n]),Hr(t,e,n))},Fn.over=lu,Fn.overArgs=Ls,Fn.overEvery=cu,Fn.overSome=hu,Fn.partial=Ds,Fn.partialRight=Bs,Fn.partition=As,Fn.pick=Do,Fn.pickBy=Bo,Fn.property=fu,Fn.propertyOf=function(t){return function(e){return null==t?r:Ar(t,e)}},Fn.pull=Za,Fn.pullAll=Ya,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qr(t,e,ua(n,2)):t},Fn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qr(t,e,r,n):t},Fn.pullAt=Ja,Fn.range=du,Fn.rangeRight=pu,Fn.rearg=zs,Fn.reject=function(t,e){return(Ns(t)?Oe:mr)(t,Ts(ua(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=ua(e,3);++r<a;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Gr(t,i),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new Et(i);return Zr(t,e=e===r?e:po(e))},Fn.reverse=Ka,Fn.sampleSize=function(t,e,n){return e=(n?ba(t,e,n):e===r)?1:po(e),(Ns(t)?Jn:Jr)(t,e)},Fn.set=function(t,e,n){return null==t?t:Kr(t,e,n)},Fn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Kr(t,e,n,i)},Fn.shuffle=function(t){return(Ns(t)?Kn:ni)(t)},Fn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ba(t,e,n)?(e=0,n=i):(e=null==e?0:po(e),n=n===r?i:po(n)),ri(t,e,n)):[]},Fn.sortBy=Cs,Fn.sortedUniq=function(t){return t&&t.length?oi(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,ua(e,2)):[]},Fn.split=function(t,e,n){return n&&"number"!=typeof n&&ba(t,e,n)&&(e=n=r),(n=n===r?v:n>>>0)?(t=yo(t))&&("string"==typeof e||null!=e&&!io(e))&&!(e=li(e))&&on(t)?ki(dn(t),0,n):t.split(e,n):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new Et(i);return e=null==e?0:yn(po(e),0),Zr((function(n){var r=n[e],i=ki(n,0,e);return r&&Le(i,r),Se(t,this,i)}))},Fn.tail=function(t){var e=null==t?0:t.length;return e?ri(t,1,e):[]},Fn.take=function(t,e,n){return t&&t.length?ri(t,0,(e=n||e===r?1:po(e))<0?0:e):[]},Fn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?ri(t,(e=i-(e=n||e===r?1:po(e)))<0?0:e,i):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?di(t,ua(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?di(t,ua(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var r=!0,a=!0;if("function"!=typeof t)throw new Et(i);return Ks(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Es(t,e,{leading:r,maxWait:e,trailing:a})},Fn.thru=fs,Fn.toArray=ho,Fn.toPairs=zo,Fn.toPairsIn=Wo,Fn.toPath=function(t){return Ns(t)?Te(t,Da):oo(t)?[t]:Mi(La(yo(t)))},Fn.toPlainObject=go,Fn.transform=function(t,e,n){var r=Ns(t),i=r||Gs(t)||uo(t);if(e=ua(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:Ks(t)&&Zs(a)?Un(Gt(t)):{}}return(i?Ie:wr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Fn.unary=function(t){return Ss(t,1)},Fn.union=ts,Fn.unionBy=es,Fn.unionWith=ns,Fn.uniq=function(t){return t&&t.length?ci(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?ci(t,ua(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?ci(t,r,e):[]},Fn.unset=function(t,e){return null==t||hi(t,e)},Fn.unzip=rs,Fn.unzipWith=is,Fn.update=function(t,e,n){return null==t?t:fi(t,e,yi(n))},Fn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:fi(t,e,yi(n),i)},Fn.values=Fo,Fn.valuesIn=function(t){return null==t?[]:Ke(t,jo(t))},Fn.without=as,Fn.words=Yo,Fn.wrap=function(t,e){return Ds(yi(e),t)},Fn.xor=ss,Fn.xorBy=os,Fn.xorWith=us,Fn.zip=ls,Fn.zipObject=function(t,e){return mi(t||[],e||[],er)},Fn.zipObjectDeep=function(t,e){return mi(t||[],e||[],Kr)},Fn.zipWith=cs,Fn.entries=zo,Fn.entriesIn=Wo,Fn.extend=wo,Fn.extendWith=ko,ou(Fn,Fn),Fn.add=gu,Fn.attempt=Jo,Fn.camelCase=Uo,Fn.capitalize=Vo,Fn.ceil=yu,Fn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=mo(n))==n?n:0),e!==r&&(e=(e=mo(e))==e?e:0),or(mo(t),e,n)},Fn.clone=function(t){return ur(t,4)},Fn.cloneDeep=function(t){return ur(t,5)},Fn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:r)},Fn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:r)},Fn.conformsTo=function(t,e){return null==e||lr(t,e,Oo(e))},Fn.deburr=No,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=bu,Fn.endsWith=function(t,e,n){t=yo(t),e=li(e);var i=t.length,a=n=n===r?i:or(po(n),0,i);return(n-=e.length)>=0&&t.slice(n,a)==e},Fn.eq=Ws,Fn.escape=function(t){return(t=yo(t))&&Z.test(t)?t.replace($,an):t},Fn.escapeRegExp=function(t){return(t=yo(t))&&it.test(t)?t.replace(rt,"\\$&"):t},Fn.every=function(t,e,n){var i=Ns(t)?Ee:pr;return n&&ba(t,e,n)&&(e=r),i(t,ua(e,3))},Fn.find=vs,Fn.findIndex=Va,Fn.findKey=function(t,e){return Fe(t,ua(e,3),wr)},Fn.findLast=ms,Fn.findLastIndex=Na,Fn.findLastKey=function(t,e){return Fe(t,ua(e,3),kr)},Fn.floor=wu,Fn.forEach=gs,Fn.forEachRight=ys,Fn.forIn=function(t,e){return null==t?t:yr(t,ua(e,3),jo)},Fn.forInRight=function(t,e){return null==t?t:br(t,ua(e,3),jo)},Fn.forOwn=function(t,e){return t&&wr(t,ua(e,3))},Fn.forOwnRight=function(t,e){return t&&kr(t,ua(e,3))},Fn.get=So,Fn.gt=Fs,Fn.gte=Us,Fn.has=function(t,e){return null!=t&&va(t,e,xr)},Fn.hasIn=xo,Fn.head=Xa,Fn.identity=ru,Fn.includes=function(t,e,n,r){t=Xs(t)?t:Fo(t),n=n&&!r?po(n):0;var i=t.length;return n<0&&(n=yn(i+n,0)),so(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ve(t,e,n)>-1},Fn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=yn(r+i,0)),Ve(t,e,i)},Fn.inRange=function(t,e,n){return e=fo(e),n===r?(n=e,e=0):n=fo(n),function(t,e,n){return t>=bn(e,n)&&t<yn(e,n)}(t=mo(t),e,n)},Fn.invoke=Eo,Fn.isArguments=Vs,Fn.isArray=Ns,Fn.isArrayBuffer=Hs,Fn.isArrayLike=Xs,Fn.isArrayLikeObject=qs,Fn.isBoolean=function(t){return!0===t||!1===t||to(t)&&Pr(t)==b},Fn.isBuffer=Gs,Fn.isDate=$s,Fn.isElement=function(t){return to(t)&&1===t.nodeType&&!ro(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(Xs(t)&&(Ns(t)||"string"==typeof t||"function"==typeof t.splice||Gs(t)||uo(t)||Vs(t)))return!t.length;var e=pa(t);if(e==C||e==M)return!t.size;if(Aa(t))return!Dr(t).length;for(var n in t)if(Dt.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return jr(t,e)},Fn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?jr(t,e,r,n):!!i},Fn.isError=Qs,Fn.isFinite=function(t){return"number"==typeof t&&We(t)},Fn.isFunction=Zs,Fn.isInteger=Ys,Fn.isLength=Js,Fn.isMap=eo,Fn.isMatch=function(t,e){return t===e||Rr(t,e,ca(e))},Fn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Rr(t,e,ca(e),n)},Fn.isNaN=function(t){return no(t)&&t!=+t},Fn.isNative=function(t){if(_a(t))throw new Ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Tr(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=no,Fn.isObject=Ks,Fn.isObjectLike=to,Fn.isPlainObject=ro,Fn.isRegExp=io,Fn.isSafeInteger=function(t){return Ys(t)&&t>=-9007199254740991&&t<=d},Fn.isSet=ao,Fn.isString=so,Fn.isSymbol=oo,Fn.isTypedArray=uo,Fn.isUndefined=function(t){return t===r},Fn.isWeakMap=function(t){return to(t)&&pa(t)==j},Fn.isWeakSet=function(t){return to(t)&&"[object WeakSet]"==Pr(t)},Fn.join=function(t,e){return null==t?"":Ge.call(t,e)},Fn.kebabCase=Ho,Fn.last=Qa,Fn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i;return n!==r&&(a=(a=po(n))<0?yn(i+a,0):bn(a,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,a):Ue(t,He,a,!0)},Fn.lowerCase=Xo,Fn.lowerFirst=qo,Fn.lt=lo,Fn.lte=co,Fn.max=function(t){return t&&t.length?vr(t,ru,Sr):r},Fn.maxBy=function(t,e){return t&&t.length?vr(t,ua(e,2),Sr):r},Fn.mean=function(t){return Xe(t,ru)},Fn.meanBy=function(t,e){return Xe(t,ua(e,2))},Fn.min=function(t){return t&&t.length?vr(t,ru,zr):r},Fn.minBy=function(t,e){return t&&t.length?vr(t,ua(e,2),zr):r},Fn.stubArray=vu,Fn.stubFalse=mu,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=_u,Fn.nth=function(t,e){return t&&t.length?Nr(t,po(e)):r},Fn.noConflict=function(){return pe._===this&&(pe._=Ut),this},Fn.noop=uu,Fn.now=Ps,Fn.pad=function(t,e,n){t=yo(t);var r=(e=po(e))?fn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Hi(me(i),n)+t+Hi(ve(i),n)},Fn.padEnd=function(t,e,n){t=yo(t);var r=(e=po(e))?fn(t):0;return e&&r<e?t+Hi(e-r,n):t},Fn.padStart=function(t,e,n){t=yo(t);var r=(e=po(e))?fn(t):0;return e&&r<e?Hi(e-r,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),kn(yo(t).replace(at,""),e||0)},Fn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ba(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=fo(t),e===r?(e=t,t=0):e=fo(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var a=_n();return bn(t+a*(e-t+ce("1e-"+((a+"").length-1))),e)}return $r(t,e)},Fn.reduce=function(t,e,n){var r=Ns(t)?De:$e,i=arguments.length<3;return r(t,ua(e,4),n,i,fr)},Fn.reduceRight=function(t,e,n){var r=Ns(t)?Be:$e,i=arguments.length<3;return r(t,ua(e,4),n,i,dr)},Fn.repeat=function(t,e,n){return e=(n?ba(t,e,n):e===r)?1:po(e),Qr(yo(t),e)},Fn.replace=function(){var t=arguments,e=yo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,n){var i=-1,a=(e=bi(e,t)).length;for(a||(a=1,t=r);++i<a;){var s=null==t?r:t[Da(e[i])];s===r&&(i=a,s=n),t=Zs(s)?s.call(t):s}return t},Fn.round=Au,Fn.runInContext=t,Fn.sample=function(t){return(Ns(t)?Yn:Yr)(t)},Fn.size=function(t){if(null==t)return 0;if(Xs(t))return so(t)?fn(t):t.length;var e=pa(t);return e==C||e==M?t.size:Dr(t).length},Fn.snakeCase=Go,Fn.some=function(t,e,n){var i=Ns(t)?ze:ii;return n&&ba(t,e,n)&&(e=r),i(t,ua(e,3))},Fn.sortedIndex=function(t,e){return ai(t,e)},Fn.sortedIndexBy=function(t,e,n){return si(t,e,ua(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&Ws(t[r],e))return r}return-1},Fn.sortedLastIndex=function(t,e){return ai(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return si(t,e,ua(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ai(t,e,!0)-1;if(Ws(t[n],e))return n}return-1},Fn.startCase=$o,Fn.startsWith=function(t,e,n){return t=yo(t),n=null==n?0:or(po(n),0,t.length),e=li(e),t.slice(n,n+e.length)==e},Fn.subtract=Cu,Fn.sum=function(t){return t&&t.length?Qe(t,ru):0},Fn.sumBy=function(t,e){return t&&t.length?Qe(t,ua(e,2)):0},Fn.template=function(t,e,n){var i=Fn.templateSettings;n&&ba(t,e,n)&&(e=r),t=yo(t),e=ko({},e,i,Ji);var a,s,o=ko({},e.imports,i.imports,Ji),u=Oo(o),l=Ke(o,u),c=0,h=e.interpolate||kt,f="__p += '",d=It((e.escape||kt).source+"|"+h.source+"|"+(h===K?dt:kt).source+"|"+(e.evaluate||kt).source+"|$","g"),p="//# sourceURL="+(Dt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(d,(function(e,n,r,i,o,u){return r||(r=i),f+=t.slice(c,u).replace(_t,sn),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),o&&(s=!0,f+="';\n"+o+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),f+="';\n";var v=Dt.call(e,"variable")&&e.variable;if(v){if(ht.test(v))throw new Ct("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(H,""):f).replace(X,"$1").replace(q,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Jo((function(){return Pt(u,p+"return "+f).apply(r,l)}));if(m.source=f,Qs(m))throw m;return m},Fn.times=function(t,e){if((t=po(t))<1||t>d)return[];var n=v,r=bn(t,v);e=ua(e),t-=v;for(var i=Ze(r,e);++n<t;)e(n);return i},Fn.toFinite=fo,Fn.toInteger=po,Fn.toLength=vo,Fn.toLower=function(t){return yo(t).toLowerCase()},Fn.toNumber=mo,Fn.toSafeInteger=function(t){return t?or(po(t),-9007199254740991,d):0===t?t:0},Fn.toString=yo,Fn.toUpper=function(t){return yo(t).toUpperCase()},Fn.trim=function(t,e,n){if((t=yo(t))&&(n||e===r))return Ye(t);if(!t||!(e=li(e)))return t;var i=dn(t),a=dn(e);return ki(i,en(i,a),nn(i,a)+1).join("")},Fn.trimEnd=function(t,e,n){if((t=yo(t))&&(n||e===r))return t.slice(0,pn(t)+1);if(!t||!(e=li(e)))return t;var i=dn(t);return ki(i,0,nn(i,dn(e))+1).join("")},Fn.trimStart=function(t,e,n){if((t=yo(t))&&(n||e===r))return t.replace(at,"");if(!t||!(e=li(e)))return t;var i=dn(t);return ki(i,en(i,dn(e))).join("")},Fn.truncate=function(t,e){var n=30,i="...";if(Ks(e)){var a="separator"in e?e.separator:a;n="length"in e?po(e.length):n,i="omission"in e?li(e.omission):i}var s=(t=yo(t)).length;if(on(t)){var o=dn(t);s=o.length}if(n>=s)return t;var u=n-fn(i);if(u<1)return i;var l=o?ki(o,0,u).join(""):t.slice(0,u);if(a===r)return l+i;if(o&&(u+=l.length-u),io(a)){if(t.slice(u).search(a)){var c,h=l;for(a.global||(a=It(a.source,yo(pt.exec(a))+"g")),a.lastIndex=0;c=a.exec(h);)var f=c.index;l=l.slice(0,f===r?u:f)}}else if(t.indexOf(li(a),u)!=u){var d=l.lastIndexOf(a);d>-1&&(l=l.slice(0,d))}return l+i},Fn.unescape=function(t){return(t=yo(t))&&Q.test(t)?t.replace(G,vn):t},Fn.uniqueId=function(t){var e=++Bt;return yo(t)+e},Fn.upperCase=Qo,Fn.upperFirst=Zo,Fn.each=gs,Fn.eachRight=ys,Fn.first=Xa,ou(Fn,(ku={},wr(Fn,(function(t,e){Dt.call(Fn.prototype,e)||(ku[e]=t)})),ku),{chain:!1}),Fn.VERSION="4.17.21",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fn[t].placeholder=Fn})),Ie(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===r?1:yn(po(n),0);var i=this.__filtered__&&!e?new Hn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(n,i.__takeCount__):i.__views__.push({size:bn(n,v),type:t+(i.__dir__<0?"Right":"")}),i},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ie(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ua(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ie(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Ie(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ru)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Zr((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return Er(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(Ts(ua(t)))},Hn.prototype.slice=function(t,e){t=po(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=po(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(v)},wr(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),a=Fn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);a&&(Fn.prototype[e]=function(){var e=this.__wrapped__,o=i?[1]:arguments,u=e instanceof Hn,l=o[0],c=u||Ns(e),h=function(t){var e=a.apply(Fn,Le([t],o));return i&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,v=u&&!d;if(!s&&c){e=v?e:new Hn(this);var m=t.apply(e,o);return m.__actions__.push({func:fs,args:[h],thisArg:r}),new Nn(m,f)}return p&&v?t.apply(this,o):(m=this.thru(h),p?i?m.value()[0]:m.value():m)})})),Ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ot[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ns(i)?i:[],t)}return this[n]((function(n){return e.apply(Ns(n)?n:[],t)}))}})),wr(Hn.prototype,(function(t,e){var n=Fn[e];if(n){var r=n.name+"";Dt.call(On,r)||(On[r]=[]),On[r].push({name:e,func:n})}})),On[Fi(r,2).name]=[{name:"wrapper",func:r}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Mi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Mi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Mi(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ns(t),r=e<0,i=n?t.length:0,a=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=bn(e,t+s);break;case"takeRight":t=yn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=a.start,o=a.end,u=o-s,l=r?o:s-1,c=this.__iteratees__,h=c.length,f=0,d=bn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return pi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var v=-1,m=t[l+=e];++v<h;){var g=c[v],y=g.iteratee,b=g.type,w=y(m);if(2==b)m=w;else if(!w){if(1==b)continue t;break t}}p[f++]=m}return p},Fn.prototype.at=ds,Fn.prototype.chain=function(){return hs(this)},Fn.prototype.commit=function(){return new Nn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===r&&(this.__values__=ho(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,n=this;n instanceof Vn;){var i=za(n);i.__index__=0,i.__values__=r,e?a.__wrapped__=i:e=i;var a=i;n=n.__wrapped__}return a.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:fs,args:[Ka],thisArg:r}),new Nn(e,this.__chain__)}return this.thru(Ka)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Jt&&(Fn.prototype[Jt]=function(){return this}),Fn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(pe._=mn,define((function(){return mn}))):me?((me.exports=mn)._=mn,ve._=mn):pe._=mn}).call(this)}));var a,s={};
/*!
 * wavesurfer.js 6.6.2 (2023-03-26)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */self,a=()=>{return t={"./src/drawer.canvasentry.js":
/*!***********************************!*\
  !*** ./src/drawer.canvasentry.js ***!
  \***********************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(/*! ./util/style */"./src/util/style.js")),i=a(n(/*! ./util/get-id */"./src/util/get-id.js"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,a=void 0,a=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===s(a)?a:String(a)),r)}var i,a}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,i.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var e,n,a;return e=t,(n=[{key:"initWave",value:function(t){this.wave=t,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(t){this.progress=t,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(t,e,n,i){this.start=this.wave.offsetLeft/e||0,this.end=this.start+t/e,this.wave.width=n,this.wave.height=i;var a={width:t+"px"};(0,r.default)(this.wave,a),this.hasProgressCanvas&&(this.progress.width=n,this.progress.height=i,(0,r.default)(this.progress,a))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(t,e){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,t),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,e))}},{key:"getFillStyle",value:function(t,e){if("string"==typeof e||e instanceof CanvasGradient)return e;var n=t.createLinearGradient(0,0,0,t.canvas.height);return e.forEach((function(t,r){return n.addColorStop(r/e.length,t)})),n}},{key:"applyCanvasTransforms",value:function(t){t&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(t,e,n,r,i){this.fillRectToContext(this.waveCtx,t,e,n,r,i),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,t,e,n,r,i)}},{key:"fillRectToContext",value:function(t,e,n,r,i,a){t&&(a?this.drawRoundedRect(t,e,n,r,i,a):t.fillRect(e,n,r,i))}},{key:"drawRoundedRect",value:function(t,e,n,r,i,a){0!==i&&(i<0&&(n-=i*=-1),t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath(),t.fill())}},{key:"drawLines",value:function(t,e,n,r,i,a){this.drawLineToContext(this.waveCtx,t,e,n,r,i,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,t,e,n,r,i,a)}},{key:"drawLineToContext",value:function(t,e,n,r,i,a,s){if(t){var o,u,l,c=e.length/2,h=Math.round(c*this.start),f=h,d=Math.round(c*this.end)+1,p=this.wave.width/(d-f-1),v=r+i,m=n/r;for(t.beginPath(),t.moveTo((f-h)*p,v),t.lineTo((f-h)*p,v-Math.round((e[2*f]||0)/m)),o=f;o<d;o++)u=e[2*o]||0,l=Math.round(u/m),t.lineTo((o-h)*p+this.halfPixel,v-l);for(var g=d-1;g>=f;g--)u=e[2*g+1]||0,l=Math.round(u/m),t.lineTo((g-h)*p+this.halfPixel,v-l);t.lineTo((f-h)*p,v-Math.round((e[2*f+1]||0)/m)),t.closePath(),t.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(t,e,n){var r=this;return"blob"===n?new Promise((function(n){r.wave.toBlob(n,t,e)})):"dataURL"===n?this.wave.toDataURL(t,e):void 0}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.default=u,t.exports=e.default},"./src/drawer.js":
/*!***********************!*\
  !*** ./src/drawer.js ***!
  \***********************/(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=s?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(i,o,u):i[o]=t[o]}return i.default=t,n&&n.set(t,i),i}(n(/*! ./util */"./src/util/index.js"));function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,s=void 0,s=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===r(s)?s:String(s)),i)}var a,s}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(l,t);var e,n,r,a=u(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this)).container=i.withOrientation(t,e.vertical),n.params=e,n.width=0,n.height=e.height*n.params.pixelRatio,n.lastPos=0,n.wrapper=null,n}return e=l,(n=[{key:"style",value:function(t,e){return i.style(t,e)}},{key:"createWrapper",value:function(){this.wrapper=i.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(t,e){!e&&t.preventDefault();var n,r=i.withOrientation(t.targetTouches?t.targetTouches[0]:t,this.params.vertical).clientX,a=this.wrapper.getBoundingClientRect(),s=this.width,o=this.getWidth(),u=this.getProgressPixels(a,r);return n=!this.params.fillParent&&s<o?u*(this.params.pixelRatio/s)||0:(u+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,i.clamp(n,0,1)}},{key:"getProgressPixels",value:function(t,e){return this.params.rtl?t.right-e:e-t.left}},{key:"setupWrapperEvents",value:function(){var t=this;this.wrapper.addEventListener("click",(function(e){var n=i.withOrientation(e,t.params.vertical),r=t.wrapper.offsetHeight-t.wrapper.clientHeight;if(0!==r){var a=t.wrapper.getBoundingClientRect();if(n.clientY>=a.bottom-r)return}t.params.interact&&t.fireEvent("click",e,t.handleEvent(e))})),this.wrapper.addEventListener("dblclick",(function(e){t.params.interact&&t.fireEvent("dblclick",e,t.handleEvent(e))})),this.wrapper.addEventListener("scroll",(function(e){return t.fireEvent("scroll",e)}))}},{key:"drawPeaks",value:function(t,e,n,r){this.setWidth(e)||this.clearWave(),this.params.barWidth?this.drawBars(t,0,n,r):this.drawWave(t,0,n,r)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(t){var e=this.wrapper.scrollWidth*t;this.recenterOnPosition(e,!0)}},{key:"recenterOnPosition",value:function(t,e){var n=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=t-r,s=a-n;if(0!=i){if(!e&&-r<=s&&s<r){var o=this.params.autoCenterRate;o/=r,o*=i,a=n+(s=Math.max(-o,Math.min(o,s)))}(a=Math.max(0,Math.min(i,a)))!=n&&(this.wrapper.scrollLeft=a)}}},{key:"getScrollX",value:function(){var t=0;if(this.wrapper){var e=this.params.pixelRatio;if(t=Math.round(this.wrapper.scrollLeft*e),this.params.scrollParent){var n=~~(this.wrapper.scrollWidth*e-this.getWidth());t=Math.min(n,Math.max(0,t))}}return t}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(t){if(this.width==t)return!1;if(this.width=t,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var e=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:e})}return this.updateSize(),!0}},{key:"setHeight",value:function(t){return t!=this.height&&(this.height=t,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(t){var e=1/this.params.pixelRatio,n=Math.round(t*this.width)*e;if(n<this.lastPos||n-this.lastPos>=e){if(this.lastPos=n,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*t);this.recenterOnPosition(r,this.params.autoCenterImmediately)}this.updateProgress(n)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(t,e,n,r){}},{key:"drawWave",value:function(t,e,n,r){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(t){}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(i.Observer);e.default=c,t.exports=e.default},"./src/drawer.multicanvas.js":
/*!***********************************!*\
  !*** ./src/drawer.multicanvas.js ***!
  \***********************************/(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=u(n(/*! ./drawer */"./src/drawer.js")),a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=a?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}(n(/*! ./util */"./src/util/index.js")),s=u(n(/*! ./drawer.canvasentry */"./src/drawer.canvasentry.js"));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,s=void 0,s=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===r(s)?s:String(s)),i)}var a,s}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var a=f(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(o,t);var e,n,r,i=h(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).maxCanvasWidth=e.maxCanvasWidth,n.maxCanvasElementWidth=Math.round(e.maxCanvasWidth/e.pixelRatio),n.hasProgressCanvas=e.waveColor!=e.progressColor,n.halfPixel=.5/e.pixelRatio,n.canvases=[],n.progressWave=null,n.EntryClass=s.default,n.canvasContextAttributes=e.drawingContextAttributes,n.overlap=2*Math.ceil(e.pixelRatio/2),n.barRadius=e.barRadius||0,n.vertical=e.vertical,n}return e=o,n=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=a.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var t=this,e=Math.round(this.width/this.params.pixelRatio),n=Math.ceil(e/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<n;)this.addCanvas();for(;this.canvases.length>n;)this.removeCanvas();var r=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach((function(e,n){n==i&&(r=t.width-t.maxCanvasWidth*i),t.updateDimensions(e,r,t.height),e.clearWave()}))}},{key:"addCanvas",value:function(){var t=new this.EntryClass;t.canvasContextAttributes=this.canvasContextAttributes,t.hasProgressCanvas=this.hasProgressCanvas,t.halfPixel=this.halfPixel;var e=this.maxCanvasElementWidth*this.canvases.length,n=a.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(n,{position:"absolute",zIndex:2,left:e+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),t.initWave(n),this.hasProgressCanvas){var r=a.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(r,{position:"absolute",left:e+"px",top:0,bottom:0,height:"100%"}),t.initProgress(r)}this.canvases.push(t)}},{key:"removeCanvas",value:function(){var t=this.canvases[this.canvases.length-1];t.wave.parentElement.removeChild(t.wave.domElement),this.hasProgressCanvas&&t.progress.parentElement.removeChild(t.progress.domElement),t&&(t.destroy(),t=null),this.canvases.pop()}},{key:"updateDimensions",value:function(t,e,n){var r=Math.round(e/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);t.updateDimensions(r,i,e,n),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var t=this;a.frame((function(){t.canvases.forEach((function(t){return t.clearWave()}))}))()}},{key:"drawBars",value:function(t,e,n,r){var i=this;return this.prepareDraw(t,e,n,r,(function(t){var e=t.absmax,a=t.hasMinVals,s=(t.height,t.offsetY),o=t.halfH,u=t.peaks,l=t.channelIndex;if(void 0!==n)for(var c=a?2:1,h=u.length/c,f=i.params.barWidth*i.params.pixelRatio,d=f+(null===i.params.barGap?Math.max(i.params.pixelRatio,~~(f/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio)),p=h/i.width,v=r,m=n;m<v;m+=d){var g=0,y=Math.floor(m*p)*c,b=Math.floor((m+d)*p)*c;do{var w=Math.abs(u[y]);w>g&&(g=w),y+=c}while(y<b);var k=Math.round(g/e*o);i.params.barMinHeight&&(k=Math.max(k,i.params.barMinHeight)),i.fillRect(m+i.halfPixel,o-k+s,f+i.halfPixel,2*k,i.barRadius,l)}}))}},{key:"drawWave",value:function(t,e,n,r){var i=this;return this.prepareDraw(t,e,n,r,(function(t){var e=t.absmax,a=t.hasMinVals,s=(t.height,t.offsetY),o=t.halfH,u=t.peaks,l=t.channelIndex;if(!a){for(var c=[],h=u.length,f=0;f<h;f++)c[2*f]=u[f],c[2*f+1]=-u[f];u=c}void 0!==n&&i.drawLine(u,e,o,s,n,r,l),i.fillRect(0,o+s-i.halfPixel,i.width,i.halfPixel,i.barRadius,l)}))}},{key:"drawLine",value:function(t,e,n,r,i,a,s){var o=this,u=this.params.splitChannelsOptions.channelColors[s]||{},l=u.waveColor,c=u.progressColor;this.canvases.forEach((function(s,u){o.setFillStyles(s,l,c),o.applyCanvasTransforms(s,o.params.vertical),s.drawLines(t,e,n,r,i,a)}))}},{key:"fillRect",value:function(t,e,n,r,i,a){for(var s=Math.floor(t/this.maxCanvasWidth),o=Math.min(Math.ceil((t+n)/this.maxCanvasWidth)+1,this.canvases.length),u=s;u<o;u++){var l=this.canvases[u],c=u*this.maxCanvasWidth,h={x1:Math.max(t,u*this.maxCanvasWidth),y1:e,x2:Math.min(t+n,u*this.maxCanvasWidth+l.wave.width),y2:e+r};if(h.x1<h.x2){var f=this.params.splitChannelsOptions.channelColors[a]||{},d=f.waveColor,p=f.progressColor;this.setFillStyles(l,d,p),this.applyCanvasTransforms(l,this.params.vertical),l.fillRects(h.x1-c,h.y1,h.x2-h.x1,h.y2-h.y1,i)}}}},{key:"hideChannel",value:function(t){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(t)}},{key:"prepareDraw",value:function(t,e,n,r,i,s,o){var u=this;return a.frame((function(){if(t[0]instanceof Array){var l=t;if(u.params.splitChannels){var c,h=l.filter((function(t,e){return!u.hideChannel(e)}));return u.params.splitChannelsOptions.overlay||u.setHeight(Math.max(h.length,1)*u.params.height*u.params.pixelRatio),u.params.splitChannelsOptions&&u.params.splitChannelsOptions.relativeNormalization&&(c=a.max(l.map((function(t){return a.absMax(t)})))),l.forEach((function(t,e){return u.prepareDraw(t,e,n,r,i,h.indexOf(t),c)}))}t=l[0]}if(!u.hideChannel(e)){var f=1/u.params.barHeight;u.params.normalize&&(f=void 0===o?a.absMax(t):o);var d=[].some.call(t,(function(t){return t<0})),p=u.params.height*u.params.pixelRatio,v=p/2,m=p*s||0;return u.params.splitChannelsOptions&&u.params.splitChannelsOptions.overlay&&(m=0),i({absmax:f,hasMinVals:d,height:p,offsetY:m,halfH:v,peaks:t,channelIndex:e})}}))()}},{key:"setFillStyles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;t.setFillStyles(e,n)}},{key:"applyCanvasTransforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.applyCanvasTransforms(e)}},{key:"getImage",value:function(t,e,n){if("blob"===n)return Promise.all(this.canvases.map((function(r){return r.getImage(t,e,n)})));if("dataURL"===n){var r=this.canvases.map((function(r){return r.getImage(t,e,n)}));return r.length>1?r:r[0]}}},{key:"updateProgress",value:function(t){this.style(this.progressWave,{width:t+"px"})}}],n&&l(e.prototype,n),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(i.default);e.default=d,t.exports=e.default},"./src/mediaelement-webaudio.js":
/*!**************************************!*\
  !*** ./src/mediaelement-webaudio.js ***!
  \**************************************/(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var i;function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,s=void 0,s=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===r(s)?s:String(s)),i)}var a,s}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},s.apply(this,arguments)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(c,t);var e,n,r,i=u(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,t)).params=t,e.sourceMediaElement=null,e}return e=c,(n=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(t,e,n){s(l(c.prototype),"_load",this).call(this,t,e,n),this.createMediaElementSource(t)}},{key:"createMediaElementSource",value:function(t){this.sourceMediaElement=this.ac.createMediaElementSource(t),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(t,e){return this.resumeAudioContext(),s(l(c.prototype),"play",this).call(this,t,e)}},{key:"destroy",value:function(){s(l(c.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(((i=n(/*! ./mediaelement */"./src/mediaelement.js"))&&i.__esModule?i:{default:i}).default);e.default=c,t.exports=e.default},"./src/mediaelement.js":
/*!*****************************!*\
  !*** ./src/mediaelement.js ***!
  \*****************************/(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,a=(i=n(/*! ./webaudio */"./src/webaudio.js"))&&i.__esModule?i:{default:i},s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=a?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}(n(/*! ./util */"./src/util/index.js"));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,s=void 0,s=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===r(s)?s:String(s)),i)}var a,s}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},l.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var a=f(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(a,t);var e,n,r,i=h(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).params=t,e.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},e.mediaType=t.mediaType.toLowerCase(),e.elementPosition=t.elementPosition,e.peaks=null,e.playbackRate=1,e.volume=1,e.isMuted=!1,e.buffer=null,e.onPlayEnd=null,e.mediaListeners={},e}return e=a,(n=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var t=this;this.mediaListeners.error=function(){t.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){t.fireEvent("waiting")},this.mediaListeners.canplay=function(){t.fireEvent("canplay")},this.mediaListeners.ended=function(){t.fireEvent("finish")},this.mediaListeners.play=function(){t.fireEvent("play")},this.mediaListeners.pause=function(){t.fireEvent("pause")},this.mediaListeners.seeked=function(e){t.fireEvent("seek")},this.mediaListeners.volumechange=function(e){t.isMuted=t.media.muted,t.isMuted?t.volume=0:t.volume=t.media.volume,t.fireEvent("volume")},Object.keys(this.mediaListeners).forEach((function(e){t.media.removeEventListener(e,t.mediaListeners[e]),t.media.addEventListener(e,t.mediaListeners[e])}))}},{key:"createTimer",value:function(){var t=this;this.on("play",(function e(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),s.frame(e)())})),this.on("pause",(function(){t.fireEvent("audioprocess",t.getCurrentTime())}))}},{key:"load",value:function(t,e,n,r){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==r?"auto":r,i.src=t,i.style.width="100%";var a=e.querySelector(this.mediaType);a&&e.removeChild(a),e.appendChild(i),this._load(i,n,r)}},{key:"loadElt",value:function(t,e){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,e,t.preload)}},{key:"_load",value:function(t,e,n){if(!(t instanceof HTMLMediaElement)||void 0===t.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof t.load||e&&"none"==n||t.load(),this.media=t,this._setupMediaListeners(),this.peaks=e,this.onPlayEnd=null,this.buffer=null,this.isMuted=t.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){null==t||isNaN(t)||(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,e){this.seekTo(t);var n=this.media.play();return e&&this.setPlayEnd(e),n}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var e=this;this.clearPlayEnd(),this._onPlayEnd=function(n){n>=t&&(e.pause(),e.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,e,n){return this.buffer?l(f(a.prototype),"getPeaks",this).call(this,t,e,n):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(t){this.isMuted=this.media.muted=t}},{key:"destroy",value:function(){var t=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach((function(e){t.media&&t.media.removeEventListener(e,t.mediaListeners[e])})),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(a.default);e.default=d,t.exports=e.default},"./src/peakcache.js":
/*!**************************!*\
  !*** ./src/peakcache.js ***!
  \**************************/(t,e)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,s=void 0,s=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===n(s)?s:String(s)),i)}var a,s}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clearPeakCache()}var e,n,i;return e=t,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(t,e,n){t!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=t);for(var r=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<e;)i++;for(i%2==0&&r.push(e);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=n;)r.push(this.peakCacheRanges[i]),i++;i%2==0&&r.push(n),r=r.filter((function(t,e,n){return 0==e?t!=n[e+1]:e==n.length-1?t!=n[e-1]:t!=n[e-1]&&t!=n[e+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(r),this.peakCacheRanges=this.peakCacheRanges.sort((function(t,e){return t-e})).filter((function(t,e,n){return 0==e?t!=n[e+1]:e==n.length-1?t!=n[e-1]:t!=n[e-1]&&t!=n[e+1]}));var a=[];for(i=0;i<r.length;i+=2)a.push([r[i],r[i+1]]);return a}},{key:"getCacheRanges",value:function(){var t,e=[];for(t=0;t<this.peakCacheRanges.length;t+=2)e.push([this.peakCacheRanges[t],this.peakCacheRanges[t+1]]);return e}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.default=i,t.exports=e.default},"./src/util/absMax.js":
/*!****************************!*\
  !*** ./src/util/absMax.js ***!
  \****************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(0,r.default)(t),n=(0,i.default)(t);return-n>e?-n:e};var r=a(n(/*! ./max */"./src/util/max.js")),i=a(n(/*! ./min */"./src/util/min.js"));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},"./src/util/clamp.js":
/*!***************************!*\
  !*** ./src/util/clamp.js ***!
  \***************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return Math.min(Math.max(e,t),n)},t.exports=e.default},"./src/util/fetch.js":
/*!***************************!*\
  !*** ./src/util/fetch.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)throw new Error("fetch options missing");if(!t.url)throw new Error("fetch url missing");var e=new i.default,n=new Headers,r=new Request(t.url);e.controller=new AbortController,t&&t.requestHeaders&&t.requestHeaders.forEach((function(t){n.append(t.key,t.value)}));var a=t.responseType||"json",s={method:t.method||"GET",headers:n,mode:t.mode||"cors",credentials:t.credentials||"same-origin",cache:t.cache||"default",redirect:t.redirect||"follow",referrer:t.referrer||"client",signal:e.controller.signal};return fetch(r,s).then((function(t){e.response=t;var n=!0;t.body||(n=!1);var r=t.headers.get("content-length");return null===r&&(n=!1),n?(e.onProgress=function(t){e.fireEvent("progress",t)},new Response(new ReadableStream(new o(e,r,t)),s)):t})).then((function(t){var e;if(t.ok)switch(a){case"arraybuffer":return t.arrayBuffer();case"json":return t.json();case"blob":return t.blob();case"text":return t.text();default:e="Unknown responseType: "+a}throw e||(e="HTTP error status: "+t.status),new Error(e)})).then((function(t){e.fireEvent("success",t)})).catch((function(t){e.fireEvent("error",t)})),e.fetchRequest=r,e};var r,i=(r=n(/*! ./observer */"./src/util/observer.js"))&&r.__esModule?r:{default:r};function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,s=void 0,s=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===a(s)?s:String(s)),r)}var i,s}var o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instance=e,this.instance._reader=r.body.getReader(),this.total=parseInt(n,10),this.loaded=0}var e,n,r;return e=t,(n=[{key:"start",value:function(t){var e=this;!function n(){e.instance._reader.read().then((function(r){var i=r.done,a=r.value;if(i)return 0===e.total&&e.instance.onProgress.call(e.instance,{loaded:e.loaded,total:e.total,lengthComputable:!1}),void t.close();e.loaded+=a.byteLength,e.instance.onProgress.call(e.instance,{loaded:e.loaded,total:e.total,lengthComputable:!(0===e.total)}),t.enqueue(a),n()})).catch((function(e){t.error(e)}))}()}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=e.default},"./src/util/frame.js":
/*!***************************!*\
  !*** ./src/util/frame.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,i.default)((function(){return t.apply(void 0,n)}))}};var r,i=(r=n(/*! ./request-animation-frame */"./src/util/request-animation-frame.js"))&&r.__esModule?r:{default:r};t.exports=e.default},"./src/util/get-id.js":
/*!****************************!*\
  !*** ./src/util/get-id.js ***!
  \****************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return void 0===t&&(t="wavesurfer_"),t+Math.random().toString(32).substring(2)},t.exports=e.default},"./src/util/index.js":
/*!***************************!*\
  !*** ./src/util/index.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Observer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"absMax",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"clamp",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"fetchFile",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"frame",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getId",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"ignoreSilenceMode",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"max",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"min",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"preventClick",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"requestAnimationFrame",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"style",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"withOrientation",{enumerable:!0,get:function(){return v.default}});var r=g(n(/*! ./get-id */"./src/util/get-id.js")),i=g(n(/*! ./max */"./src/util/max.js")),a=g(n(/*! ./min */"./src/util/min.js")),s=g(n(/*! ./absMax */"./src/util/absMax.js")),o=g(n(/*! ./observer */"./src/util/observer.js")),u=g(n(/*! ./style */"./src/util/style.js")),l=g(n(/*! ./request-animation-frame */"./src/util/request-animation-frame.js")),c=g(n(/*! ./frame */"./src/util/frame.js")),h=g(n(/*! debounce */"./node_modules/debounce/index.js")),f=g(n(/*! ./prevent-click */"./src/util/prevent-click.js")),d=g(n(/*! ./fetch */"./src/util/fetch.js")),p=g(n(/*! ./clamp */"./src/util/clamp.js")),v=g(n(/*! ./orientation */"./src/util/orientation.js")),m=g(n(/*! ./silence-mode */"./src/util/silence-mode.js"));function g(t){return t&&t.__esModule?t:{default:t}}},"./src/util/max.js":
/*!*************************!*\
  !*** ./src/util/max.js ***!
  \*************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=-1/0;return Object.keys(t).forEach((function(n){t[n]>e&&(e=t[n])})),e},t.exports=e.default},"./src/util/min.js":
/*!*************************!*\
  !*** ./src/util/min.js ***!
  \*************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Number(1/0);return Object.keys(t).forEach((function(n){t[n]<e&&(e=t[n])})),e},t.exports=e.default},"./src/util/observer.js":
/*!******************************!*\
  !*** ./src/util/observer.js ***!
  \******************************/(t,e)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,s=void 0,s=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===n(s)?s:String(s)),i)}var a,s}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._disabledEventEmissions=[],this.handlers=null}var e,n,i;return e=t,n=[{key:"on",value:function(t,e){var n=this;this.handlers||(this.handlers={});var r=this.handlers[t];return r||(r=this.handlers[t]=[]),r.push(e),{name:t,callback:e,un:function(t,e){return n.un(t,e)}}}},{key:"un",value:function(t,e){if(this.handlers){var n,r=this.handlers[t];if(r)if(e)for(n=r.length-1;n>=0;n--)r[n]==e&&r.splice(n,1);else r.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(t,e){var n=this;return this.on(t,(function r(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];e.apply(n,a),setTimeout((function(){n.un(t,r)}),0)}))}},{key:"setDisabledEventEmissions",value:function(t){this._disabledEventEmissions=t}},{key:"_isDisabledEventEmission",value:function(t){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(t)}},{key:"fireEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.handlers&&!this._isDisabledEventEmission(t)){var i=this.handlers[t];i&&i.forEach((function(t){t.apply(void 0,n)}))}}}],n&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.default=i,t.exports=e.default},"./src/util/orientation.js":
/*!*********************************!*\
  !*** ./src/util/orientation.js ***!
  \*********************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){return e[i]?e:new Proxy(e,{get:function(e,a,s){if(a===i)return!0;if("domElement"===a)return e;if("style"===a)return t(e.style,n);if("canvas"===a)return t(e.canvas,n);if("getBoundingClientRect"===a)return function(){return t(e.getBoundingClientRect.apply(e,arguments),n)};if("getContext"===a)return function(){return t(e.getContext.apply(e,arguments),n)};var o=e[r(a,n)];return"function"==typeof o?o.bind(e):o},set:function(t,e,i){return t[r(e,n)]=i,!0}})};var n={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function r(t,e){return Object.prototype.hasOwnProperty.call(n,t)&&e?n[t]:t}var i=Symbol("isProxy");t.exports=e.default},"./src/util/prevent-click.js":
/*!***********************************!*\
  !*** ./src/util/prevent-click.js ***!
  \***********************************/(t,e)=>{function n(t){t.stopPropagation(),document.body.removeEventListener("click",n,!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){document.body.addEventListener("click",n,!0)},t.exports=e.default},"./src/util/request-animation-frame.js":
/*!*********************************************!*\
  !*** ./src/util/request-animation-frame.js ***!
  \*********************************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return setTimeout(t,1e3/60)}).bind(window);e.default=n,t.exports=e.default},"./src/util/silence-mode.js":
/*!**********************************!*\
  !*** ./src/util/silence-mode.js ***!
  \**********************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=new AudioContext,e=t.createBufferSource();e.buffer=t.createBuffer(1,1,44100),e.connect(t.destination),e.start();var n=document.createElement("div");n.innerHTML='<audio x-webkit-airplay="deny"></audio>';var r=n.children.item(0);r.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",r.preload="auto",r.type="audio/mpeg",r.disableRemotePlayback=!0,r.play(),r.remove(),n.remove()},t.exports=e.default},"./src/util/style.js":
/*!***************************!*\
  !*** ./src/util/style.js ***!
  \***************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return Object.keys(e).forEach((function(n){t.style[n]!==e[n]&&(t.style[n]=e[n])})),t},t.exports=e.default},"./src/wavesurfer.js":
/*!***************************!*\
  !*** ./src/wavesurfer.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==g(t)&&"function"!=typeof t)return{default:t};var n=c(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}(n(/*! ./util */"./src/util/index.js")),i=l(n(/*! ./drawer.multicanvas */"./src/drawer.multicanvas.js")),a=l(n(/*! ./webaudio */"./src/webaudio.js")),s=l(n(/*! ./mediaelement */"./src/mediaelement.js")),o=l(n(/*! ./peakcache */"./src/peakcache.js")),u=l(n(/*! ./mediaelement-webaudio */"./src/mediaelement-webaudio.js"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(c=function(t){return t?n:e})(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function m(t,e,n){return(e=k(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function w(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(n,t);var e=f(n);function n(t){var o;if(y(this,n),m(p(o=e.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:i.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),m(p(o),"backends",{MediaElement:s.default,WebAudio:a.default,MediaElementWebAudio:u.default}),m(p(o),"util",r),o.params=Object.assign({},o.defaultParams,t),o.params.splitChannelsOptions=Object.assign({},o.defaultParams.splitChannelsOptions,t.splitChannelsOptions),o.container="string"==typeof t.container?document.querySelector(o.params.container):o.params.container,!o.container)throw new Error("Container element not found");if(null==o.params.mediaContainer?o.mediaContainer=o.container:"string"==typeof o.params.mediaContainer?o.mediaContainer=document.querySelector(o.params.mediaContainer):o.mediaContainer=o.params.mediaContainer,!o.mediaContainer)throw new Error("Media Container element not found");if(o.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(o.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===o.params.rtl&&(!0===o.params.vertical?r.style(o.container,{transform:"rotateX(180deg)"}):r.style(o.container,{transform:"rotateY(180deg)"})),o.params.backgroundColor&&o.setBackgroundColor(o.params.backgroundColor),o.savedVolume=0,o.isMuted=!1,o.tmpEvents=[],o.currentRequest=null,o.arraybuffer=null,o.drawer=null,o.backend=null,o.peakCache=null,"function"!=typeof o.params.renderer)throw new Error("Renderer parameter is invalid");o.Drawer=o.params.renderer,"AudioElement"==o.params.backend&&(o.params.backend="MediaElement"),"WebAudio"!=o.params.backend&&"MediaElementWebAudio"!==o.params.backend||a.default.prototype.supportsWebAudio.call(null)||(o.params.backend="MediaElement"),o.Backend=o.backends[o.params.backend],o.initialisedPluginList={},o.isDestroyed=!1,o.isReady=!1;var l=0;return o._onResize=r.debounce((function(){o.drawer.wrapper&&l!=o.drawer.wrapper.clientWidth&&!o.params.scrollParent&&(l=o.drawer.wrapper.clientWidth)&&o.drawer.fireEvent("redraw")}),"number"==typeof o.params.responsive?o.params.responsive:100),d(o,p(o))}return w(n,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(t){var e=this;return t.forEach((function(t){return e.addPlugin(t)})),t.forEach((function(t){t.deferInit||e.initPlugin(t.name)})),this.fireEvent("plugins-registered",t),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(t){var e=this;if(!t.name)throw new Error("Plugin does not have a name!");if(!t.instance)throw new Error("Plugin ".concat(t.name," does not have an instance property!"));t.staticProps&&Object.keys(t.staticProps).forEach((function(n){e[n]=t.staticProps[n]}));var n=t.instance;return Object.getOwnPropertyNames(r.Observer.prototype).forEach((function(t){n.prototype[t]=r.Observer.prototype[t]})),this[t.name]=new n(t.params||{},this),this.fireEvent("plugin-added",t.name),this}},{key:"initPlugin",value:function(t){if(!this[t])throw new Error("Plugin ".concat(t," has not been added yet!"));return this.initialisedPluginList[t]&&this.destroyPlugin(t),this[t].init(),this.initialisedPluginList[t]=!0,this.fireEvent("plugin-initialised",t),this}},{key:"destroyPlugin",value:function(t){if(!this[t])throw new Error("Plugin ".concat(t," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[t])throw new Error("Plugin ".concat(t," is not active and cannot be destroyed!"));if("function"!=typeof this[t].destroy)throw new Error("Plugin ".concat(t," does not have a destroy function!"));return this[t].destroy(),delete this.initialisedPluginList[t],this.fireEvent("plugin-destroyed",t),this}},{key:"destroyAllPlugins",value:function(){var t=this;Object.keys(this.initialisedPluginList).forEach((function(e){return t.destroyPlugin(e)}))}},{key:"createDrawer",value:function(){var t=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){t.drawBuffer(),t.drawer.progress(t.backend.getPlayedPercents())})),this.drawer.on("click",(function(e,n){setTimeout((function(){return t.seekTo(n)}),0)})),this.drawer.on("scroll",(function(e){t.params.partialRender&&t.drawBuffer(),t.fireEvent("scroll",e)}))}},{key:"createBackend",value:function(){var t=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){t.drawer.progress(t.backend.getPlayedPercents()),t.fireEvent("finish")})),this.backend.on("play",(function(){return t.fireEvent("play")})),this.backend.on("pause",(function(){return t.fireEvent("pause")})),this.backend.on("audioprocess",(function(e){t.drawer.progress(t.backend.getPlayedPercents()),t.fireEvent("audioprocess",e)})),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",(function(){t.drawer.progress(t.backend.getPlayedPercents())})),this.backend.on("volume",(function(){var e=t.getVolume();t.fireEvent("volume",e),t.backend.isMuted!==t.isMuted&&(t.isMuted=t.backend.isMuted,t.fireEvent("mute",t.isMuted))})))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new o.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(t){t>=this.getDuration()?this.seekTo(1):this.seekTo(t/this.getDuration())}},{key:"play",value:function(t,e){var n=this;return this.params.ignoreSilenceMode&&r.ignoreSilenceMode(),this.fireEvent("interaction",(function(){return n.play(t,e)})),this.backend.play(t,e)}},{key:"setPlayEnd",value:function(t){this.backend.setPlayEnd(t)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(t){this.skip(-t||-this.params.skipLength)}},{key:"skipForward",value:function(t){this.skip(t||this.params.skipLength)}},{key:"skip",value:function(t){var e=this.getDuration()||1,n=this.getCurrentTime()||0;n=Math.max(0,Math.min(e,n+(t||0))),this.seekAndCenter(n/e)}},{key:"seekAndCenter",value:function(t){this.seekTo(t),this.drawer.recenter(t)}},{key:"seekTo",value:function(t){var e=this;if("number"!=typeof t||!isFinite(t)||t<0||t>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return e.seekTo(t)}));var n="WebAudio"===this.params.backend,r=this.backend.isPaused();n&&!r&&this.backend.pause();var i=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(t*this.getDuration()),this.drawer.progress(t),n&&!r&&this.backend.play(),this.params.scrollParent=i,this.fireEvent("seek",t)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(t){return this.backend.setSinkId(t)}},{key:"setVolume",value:function(t){!0!==this.isMuted?(this.backend.setVolume(t),this.fireEvent("volume",t)):this.savedVolume=t}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(t){this.backend.setPlaybackRate(t)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(t){t!==this.isMuted?(this.backend.setMute?(this.backend.setMute(t),this.isMuted=t):t?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor=t:this.params.waveColor=t,this.drawBuffer()}},{key:"getProgressColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(t,e){this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor=t:this.params.progressColor=t,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(t){this.params.backgroundColor=t,r.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(t){this.params.cursorColor=t,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(t){this.params.height=t,this.drawer.setHeight(t*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(t){this.params.splitChannelsOptions.filterChannels=t,this.drawBuffer()}},{key:"drawBuffer",value:function(){var t,e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),n=this.drawer.getWidth(),r=e,i=0,a=Math.max(i+n,r);if(this.params.fillParent&&(!this.params.scrollParent||e<n)&&(i=0,a=r=n),this.params.partialRender){var s,o=this.peakCache.addRangeToPeakCache(r,i,a);for(s=0;s<o.length;s++)t=this.backend.getPeaks(r,o[s][0],o[s][1]),this.drawer.drawPeaks(t,r,o[s][0],o[s][1])}else t=this.backend.getPeaks(r,i,a),this.drawer.drawPeaks(t,r,i,a);this.fireEvent("redraw",t,r)}},{key:"zoom",value:function(t){t?(this.params.minPxPerSec=t,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",t)}},{key:"loadArrayBuffer",value:function(t){var e=this;this.decodeArrayBuffer(t,(function(t){e.isDestroyed||e.loadDecodedBuffer(t)}))}},{key:"loadDecodedBuffer",value:function(t){this.backend.load(t),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(t){var e=this,n=new FileReader;n.addEventListener("progress",(function(t){return e.onProgress(t)})),n.addEventListener("load",(function(t){return e.loadArrayBuffer(t.target.result)})),n.addEventListener("error",(function(){return e.fireEvent("error","Error reading file")})),n.readAsArrayBuffer(t),this.empty()}},{key:"load",value:function(t,e,n,r){if(!t)throw new Error("url parameter cannot be empty");if(this.empty(),n){var i={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(n),"Peaks are not provided":!e,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof t},a=Object.keys(i).filter((function(t){return i[t]}));a.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+a.join("\n\t- ")),n=null)}switch("WebAudio"===this.params.backend&&t instanceof HTMLMediaElement&&(t=t.src),this.params.backend){case"WebAudio":return this.loadBuffer(t,e,r);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(t,e,n,r)}}},{key:"loadBuffer",value:function(t,e,n){var r=this,i=function(e){return e&&r.tmpEvents.push(r.once("ready",e)),r.getArrayBuffer(t,(function(t){return r.loadArrayBuffer(t)}))};if(!e)return i();this.backend.setPeaks(e,n),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(t,e,n,r){var i=this,a=t;if("string"==typeof t)this.backend.load(a,this.mediaContainer,e,n);else{var s=t;this.backend.loadElt(s,e),a=s.src}this.tmpEvents.push(this.backend.once("canplay",(function(){i.backend.destroyed||(i.drawBuffer(),i.isReady=!0,i.fireEvent("ready"))})),this.backend.once("error",(function(t){return i.fireEvent("error",t)}))),e&&(this.backend.setPeaks(e,r),this.drawBuffer(),this.fireEvent("waveform-ready")),e&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(a,(function(t){i.decodeArrayBuffer(t,(function(t){i.backend.buffer=t,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function(t,e){var n=this;this.isDestroyed||(this.arraybuffer=t,this.backend.decodeArrayBuffer(t,(function(r){n.isDestroyed||n.arraybuffer!=t||(e(r),n.arraybuffer=null)}),(function(){return n.fireEvent("error","Error decoding audiobuffer")})))}},{key:"getArrayBuffer",value:function(t,e){var n=this,i=Object.assign({url:t,responseType:"arraybuffer"},this.params.xhr),a=r.fetchFile(i);return this.currentRequest=a,this.tmpEvents.push(a.on("progress",(function(t){n.onProgress(t)})),a.on("success",(function(t){e(t),n.currentRequest=null})),a.on("error",(function(t){n.fireEvent("error",t),n.currentRequest=null}))),a}},{key:"onProgress",value:function(t){var e;e=t.lengthComputable?t.loaded/t.total:t.loaded/(t.loaded+1e6),this.fireEvent("loading",Math.round(100*e),t.target)}},{key:"exportPCM",value:function(t,e,n,r,i){t=t||1024,r=r||0,e=e||1e4,n=n||!1;var a=this.backend.getPeaks(t,r,i),s=[].map.call(a,(function(t){return Math.round(t*e)/e}));return new Promise((function(t,e){if(!n){var r=new Blob([JSON.stringify(s)],{type:"application/json;charset=utf-8"}),i=URL.createObjectURL(r);window.open(i),URL.revokeObjectURL(i)}t(s)}))}},{key:"exportImage",value:function(t,e,n){return t||(t="image/png"),e||(e=1),n||(n="dataURL"),this.drawer.getImage(t,e,n)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch((function(t){})),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach((function(t){return t.un()}))}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(t){return new n(t).init()}}]),n}(r.Observer);e.default=_,m(_,"VERSION","6.6.2"),m(_,"util",r),t.exports=e.default},"./src/webaudio.js":
/*!*************************!*\
  !*** ./src/webaudio.js ***!
  \*************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=s?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}(n(/*! ./util */"./src/util/index.js"));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,n)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function h(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}var d="playing",p="paused",v="finished",m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(a,t);var e,n,r,i=u(a);function a(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),h(l(r=i.call(this)),"audioContext",null),h(l(r),"offlineAudioContext",null),h(l(r),"stateBehaviors",(h(e={},d,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),h(e,p,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition}}),h(e,v,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),e)),r.params=t,r.ac=t.audioContext||(r.supportsWebAudio()?r.getAudioContext():{}),r.lastPlay=r.ac.currentTime,r.startPosition=0,r.scheduledPause=null,r.states=(h(n={},d,Object.create(r.stateBehaviors[d])),h(n,p,Object.create(r.stateBehaviors[p])),h(n,v,Object.create(r.stateBehaviors[v])),n),r.buffer=null,r.filters=[],r.gainNode=null,r.mergedPeaks=null,r.offlineAc=null,r.peaks=null,r.playbackRate=1,r.analyser=null,r.scriptNode=null,r.source=null,r.splitPeaks=[],r.state=null,r.explicitDuration=t.duration,r.sinkStreamDestination=null,r.sinkAudioElement=null,r.destroyed=!1,r}return e=a,n=[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(p),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach((function(t){t&&t.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.setFilters(e)}},{key:"setFilters",value:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce((function(t,e){return t.connect(e),e}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(a.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(a.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var t=this;this.scriptNode.onaudioprocess=function(){var e=t.getCurrentTime();e>=t.getDuration()?(t.setState(v),t.fireEvent("pause")):e>=t.scheduledPause?t.pause():t.state===t.states[d]&&t.fireEvent("audioprocess",e)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(t){return t?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(t)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(t,e,n){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(t,(function(t){return e(t)}),n):this.offlineAc.decodeAudioData(t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}},{key:"setPeaks",value:function(t,e){null!=e&&(this.explicitDuration=e),this.peaks=t}},{key:"setLength",value:function(t){if(!this.mergedPeaks||t!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var e,n=this.buffer?this.buffer.numberOfChannels:1;for(e=0;e<n;e++)this.splitPeaks[e]=[],this.splitPeaks[e][2*(t-1)]=0,this.splitPeaks[e][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function(t,e,n){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(e=e||0,n=n||t-1,this.setLength(t),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var r=this.createBuffer(1,4096,this.sampleRate);this.buffer=r.buffer}var i,a=this.buffer.length/t,s=~~(a/10)||1,o=this.buffer.numberOfChannels;for(i=0;i<o;i++){var u=this.splitPeaks[i],l=this.buffer.getChannelData(i),c=void 0;for(c=e;c<=n;c++){var h=~~(c*a),f=~~(h+a),d=l[h],p=d,v=void 0;for(v=h;v<f;v+=s){var m=l[v];m>p&&(p=m),m<d&&(d=m)}u[2*c]=p,u[2*c+1]=d,(0==i||p>this.mergedPeaks[2*c])&&(this.mergedPeaks[2*c]=p),(0==i||d<this.mergedPeaks[2*c+1])&&(this.mergedPeaks[2*c+1]=d)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[d]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(t,e){if(this.buffer)return this.scheduledPause=null,null==t&&(t=this.getCurrentTime())>=this.getDuration()&&(t=0),null==e&&(e=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[v]&&this.setState(p),{start:t,end:e}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(t,e){if(this.buffer){this.createSource();var n=this.seekTo(t,e);t=n.start,e=n.end,this.scheduledPause=e,this.source.start(0,t),this.resumeAudioContext(),this.setState(d),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(t){}this.setState(p),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(t){this.scheduledPause=t}}],n&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.Observer);e.default=m,h(m,"scriptBufferSize",256),t.exports=e.default},"./node_modules/debounce/index.js":
/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/t=>{function e(t,e,n){var r,i,a,s,o;function u(){var l=Date.now()-s;l<e&&l>=0?r=setTimeout(u,e-l):(r=null,n||(o=t.apply(a,i),a=i=null))}null==e&&(e=100);var l=function(){a=this,i=arguments,s=Date.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(o=t.apply(a,i),a=i=null),o};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(o=t.apply(a,i),a=i=null,clearTimeout(r),r=null)},l}e.debounce=e,t.exports=e}},e={},function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}("./src/wavesurfer.js");var t,e},s=a();class o{static create(t){return{name:"markers",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,staticProps:{addMarker(t){return this.initialisedPluginList.markers||this.initPlugin("markers"),this.markers.add(t)},clearMarkers(){this.markers&&this.markers.clear()}},instance:o}}constructor(t,e){this.params=t,this.wavesurfer=e,this.util=e.util,this.style=this.util.style,this.markerLineWidth=1,this.markerWidth=11,this.markerHeight=22,this.dragging=!1,this._onResize=()=>{this._updateMarkerPositions()},this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.params.markers&&this.params.markers.forEach((t=>this.add(t))),window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0),this.wavesurfer.on("zoom",this._onResize),this.markers.find((t=>t.draggable))&&(this.onMouseMove=t=>this._onMouseMove(t),window.addEventListener("mousemove",this.onMouseMove),this.onMouseUp=t=>this._onMouseUp(t),window.addEventListener("mouseup",this.onMouseUp))},this.markers=[],this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this._updateMarkerPositions()}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.un("zoom",this._onResize),window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0),this.onMouseMove&&window.removeEventListener("mousemove",this.onMouseMove),this.onMouseUp&&window.removeEventListener("mouseup",this.onMouseUp),this.clear()}add(t){let e={time:t.time,label:t.label,tooltip:t.tooltip,color:t.color||"#D8D8D8",position:t.position||"bottom",draggable:!!t.draggable,preventContextMenu:!!t.preventContextMenu};return e.el=this._createMarkerElement(e,t.markerElement),this.wrapper.appendChild(e.el),this.markers.push(e),this._updateMarkerPositions(),this._registerEvents(),e}remove(t){let e=this.markers[t];if(!e)return;let n=e.el.getElementsByClassName("marker-label")[0];n&&(n._onContextMenu&&n.removeEventListener("contextmenu",n._onContextMenu),n._onClick&&n.removeEventListener("click",n._onClick),n._onMouseDown&&n.removeEventListener("mousedown",n._onMouseDown)),this.wrapper.removeChild(e.el),this.markers.splice(t,1),this._unregisterEvents()}_createPointerSVG(t,e){const n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg"),i=document.createElementNS(n,"polygon");return r.setAttribute("viewBox","0 0 40 80"),i.setAttribute("id","polygon"),i.setAttribute("stroke","#979797"),i.setAttribute("fill",t),i.setAttribute("points","20 0 40 30 40 80 0 80 0 30"),"top"==e&&i.setAttribute("transform","rotate(180, 20 40)"),r.appendChild(i),this.style(r,{width:this.markerWidth+"px",height:this.markerHeight+"px","min-width":this.markerWidth+"px","margin-right":"5px","z-index":4}),r}_createMarkerElement(t,e){let n=t.label,r=t.tooltip;const i=document.createElement("marker");i.className="wavesurfer-marker",this.style(i,{position:"absolute",height:"100%",display:"flex",overflow:"hidden","flex-direction":"top"==t.position?"column-reverse":"column"});const a=document.createElement("div"),s=e?e.width:this.markerWidth;t.offset=(s-this.markerLineWidth)/2,this.style(a,{"flex-grow":1,"margin-left":t.offset+"px",background:"black",width:this.markerLineWidth+"px",opacity:.1}),i.appendChild(a);const o=document.createElement("div"),u=e||this._createPointerSVG(t.color,t.position);if(t.draggable&&(u.draggable=!1),o.appendChild(u),n){const t=document.createElement("span");t.innerText=n,t.setAttribute("title",r),this.style(t,{"font-family":"inherit","font-size":"90%"}),o.appendChild(t)}return this.style(o,{display:"flex","align-items":"center",cursor:"pointer"}),o.classList.add("marker-label"),i.appendChild(o),o._onClick=e=>{e.stopPropagation(),this.dragging||(this.wavesurfer.setCurrentTime(t.time),this.wavesurfer.fireEvent("marker-click",t,e))},o.addEventListener("click",o._onClick),o._onContextMenu=e=>{t.preventContextMenu&&e.preventDefault(),this.wavesurfer.fireEvent("marker-contextmenu",t,e)},o.addEventListener("contextmenu",o._onContextMenu),t.draggable&&(o._onMouseDown=()=>{this.selectedMarker=t},o.addEventListener("mousedown",o._onMouseDown)),i}_updateMarkerPositions(){for(let t=0;t<this.markers.length;t++){let e=this.markers[t];this._updateMarkerPosition(e)}}_updateMarkerPosition(t){const e=this.wavesurfer.getDuration(),n=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,r=n*Math.min(t.time/e,1)-t.offset;this.style(t.el,{left:r+"px","max-width":n-r+"px"})}_onMouseMove(t){this.selectedMarker&&(this.dragging||(this.dragging=!0,this.wavesurfer.fireEvent("marker-drag",this.selectedMarker,t)),this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(t)*this.wavesurfer.getDuration(),this._updateMarkerPositions())}_onMouseUp(t){if(this.selectedMarker&&setTimeout((()=>{this.selectedMarker=!1,this.dragging=!1}),0),!this.dragging)return;t.stopPropagation();const e=this.wavesurfer.getDuration();this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(t)*e,this._updateMarkerPositions(),this.wavesurfer.fireEvent("marker-drop",this.selectedMarker,t)}_registerEvents(){this.markers.find((t=>t.draggable))&&(this.onMouseMove||(this.onMouseMove=t=>this._onMouseMove(t),window.addEventListener("mousemove",this.onMouseMove)),this.onMouseUp||(this.onMouseUp=t=>this._onMouseUp(t),window.addEventListener("mouseup",this.onMouseUp)))}_unregisterEvents(){this.markers.find((t=>t.draggable))||(this.onMouseMove&&(window.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=null),this.onMouseUp&&(window.removeEventListener("mouseup",this.onMouseUp),this.onMouseUp=null))}clear(){for(;this.markers.length>0;)this.remove(0)}}var u={};window,u=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,"default",(function(){return o}));var o=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sampleRate,n=void 0===e?44100:e;a(this,t),this._sampleRate=n,this._context=this._createContext()}var e,n,i;return n=[{key:"_createContext",value:function(){return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext}},{key:"fetchAudio",value:async function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return await Promise.all(n.map((async function(e){var n;return n=e instanceof File||e instanceof Blob?await e.arrayBuffer():await fetch(e).then((function(t){return t.headers.has("Content-Type")&&!t.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(t.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(e,'")')),t.arrayBuffer()})),await t._context.decodeAudioData(n)})))}},{key:"mergeAudio",value:function(t){var e=this._context.createBuffer(this._maxNumberOfChannels(t),this._sampleRate*this._maxDuration(t),this._sampleRate);return t.forEach((function(t){for(var n=0;n<t.numberOfChannels;n++){for(var r=e.getChannelData(n),i=t.getChannelData(n),a=t.getChannelData(n).length-1;a>=0;a--)r[a]+=i[a];e.getChannelData(n).set(r)}})),e}},{key:"concatAudio",value:function(t){var e=this._context.createBuffer(this._maxNumberOfChannels(t),this._totalLength(t),this._sampleRate),n=0;return t.forEach((function(t){for(var r=0;r<t.numberOfChannels;r++)e.getChannelData(r).set(t.getChannelData(r),n);n+=t.length})),e}},{key:"padAudio",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return t;if(e<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(n<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var r=this._context.createBuffer(t.numberOfChannels,Math.ceil(t.length+n*t.sampleRate),t.sampleRate),i=0;i<t.numberOfChannels;i++){var a=t.getChannelData(i);r.getChannelData(i).set(a.subarray(0,Math.ceil(e*t.sampleRate)+1),0),r.getChannelData(i).set(a.subarray(Math.ceil(e*t.sampleRate)+2,r.length+1),Math.ceil((e+n)*t.sampleRate))}return r}},{key:"play",value:function(t){var e=this._context.createBufferSource();return e.buffer=t,e.connect(this._context.destination),e.start(),e}},{key:"export",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"audio/wav",n=this._interleave(t),r=this._writeHeaders(n),i=new Blob([r],{type:e});return{blob:i,url:this._renderURL(i),element:this._renderAudioElement(i)}}},{key:"download",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"crunker",n=document.createElement("a");return n.style.display="none",n.href=this._renderURL(t),n.download="".concat(e,".").concat(t.type.split("/")[1]),n.click(),n}},{key:"notSupported",value:function(t){return this._isSupported()?void 0:t()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(t){return Math.max.apply(Math,r(t.map((function(t){return t.duration}))))}},{key:"_maxNumberOfChannels",value:function(t){return Math.max.apply(Math,r(t.map((function(t){return t.numberOfChannels}))))}},{key:"_totalLength",value:function(t){return t.map((function(t){return t.length})).reduce((function(t,e){return t+e}),0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(t){var e=new ArrayBuffer(44+2*t.length),n=new DataView(e);return this._writeString(n,0,"RIFF"),n.setUint32(4,32+2*t.length,!0),this._writeString(n,8,"WAVE"),this._writeString(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,2,!0),n.setUint32(24,this._sampleRate,!0),n.setUint32(28,4*this._sampleRate,!0),n.setUint16(32,4,!0),n.setUint16(34,16,!0),this._writeString(n,36,"data"),n.setUint32(40,2*t.length,!0),this._floatTo16BitPCM(n,t,44)}},{key:"_floatTo16BitPCM",value:function(t,e,n){for(var r=0;r<e.length;r++,n+=2){var i=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,i<0?32768*i:32767*i,!0)}return t}},{key:"_writeString",value:function(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}},{key:"_interleave",value:function(t){for(var e=t.getChannelData(0),n=2*e.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=e[a],a++;return r}},{key:"_renderAudioElement",value:function(t){var e=document.createElement("audio");return e.controls=!0,e.src=this._renderURL(t),e}},{key:"_renderURL",value:function(t){return(window.URL||window.webkitURL).createObjectURL(t)}}],s((e=t).prototype,n),i&&s(e,i),t}()}]);class l{constructor(t){this.morphaweb=t,this.overlay=document.getElementById("overlay"),this.crunker=new(e(u))({sampleRate:48e3}),document.addEventListener("dragover",this.allowDrop.bind(this)),document.addEventListener("drop",this.onDrop.bind(this))}allowDrop(t){this.overlayShow(),t.preventDefault()}async loadFiles(t){let e=[],n=new AudioContext,r=[],i=0;const a=[...t].map((async t=>{await t.arrayBuffer().then((async a=>await n.decodeAudioData(a).then((async n=>{let a=await this.morphaweb.wavHandler.getMarkersFromFile(t);a=a.map(((t,e)=>(t.position+=i,t))),r.push(...a),r.push({position:1e3*n.duration}),i+=1e3*n.duration,e.push(n)}),(()=>{this.morphaweb.panelbear.track("ErrorFileUploadMarkers")}))),(()=>{this.morphaweb.panelbear.track("ErrorFileUpload")}))}));await Promise.all(a);r.pop();const s=this.crunker.concatAudio(e);return{blob:this.crunker.export(s,"audio/wav").blob,markers:r}}onDrop(t){t.preventDefault(),this.overlayHide(),this.loadFiles(t.dataTransfer.files).then((t=>{this.morphaweb.wavesurfer.loadBlob(t.blob),this.morphaweb.wavHandler.markers=t.markers}))}overlayShow(){this.overlay.style.display="block"}overlayHide(){this.overlay.style.display="none"}}var c,h=i("f1q41");class f{constructor(t){this.morphaweb=t,this.playButton=document.getElementById("play"),this.pauseButton=document.getElementById("pause"),this.exportButton=document.getElementById("export"),this.exportButton.addEventListener("click",this.exportWavFile),this.playButton.addEventListener("click",this.play),this.pauseButton.addEventListener("click",this.pause),document.addEventListener("keydown",this.onKeydown.bind(this)),this.morphaweb.wavesurfer.on("seek",this.onSeek.bind(this)),this.morphaweb.wavesurfer.on("finish",this.onFinish.bind(this)),window.addEventListener("wheel",(0,h.throttle)(this.onWheel.bind(this),10))}exportWavFile=()=>{try{if(0===this.morphaweb.wavesurfer.getDuration())return!1;const t=[this.morphaweb.wavesurfer.backend.buffer.getChannelData(0),this.morphaweb.wavesurfer.backend.buffer.getChannelData(1)],e=this.morphaweb.wavesurfer.markers.markers;this.morphaweb.wavHandler.createFileFromBuffer(t,e)}catch(t){this.morphaweb.panelbear.track("ErrorExportWavFile")}};play=()=>{this.morphaweb.wavesurfer.isPlaying()&&this.morphaweb.wavesurfer.seekTo(0),this.morphaweb.wavesurfer.play()};pause=()=>{this.morphaweb.wavesurfer.pause()};playToggle=()=>{this.morphaweb.wavesurfer.isPlaying()?this.morphaweb.wavesurfer.pause():this.morphaweb.wavesurfer.play()};onSeek=t=>{this.morphaweb.playOffset=t,this.morphaweb.markerHandler.removeTopMarker("top"),this.morphaweb.markerHandler.createMarker(this.morphaweb.playOffset*this.morphaweb.wavesurfer.getDuration(),"top"),this.morphaweb.wavesurfer.play()};onFinish=()=>{};onWheel=t=>{this.morphaweb.scrollPos+t.deltaY>=this.morphaweb.scrollMin&&(this.morphaweb.scrollPos=this.morphaweb.scrollPos+t.deltaY,this.morphaweb.wavesurfer.zoom(this.morphaweb.scrollPos))};onKeydown=t=>{switch(t.key){case"j":this.morphaweb.markerHandler.createMarkerAtCurrentPosition();break;case"k":this.morphaweb.markerHandler.removeSelectedMarker();break;case" ":this.playToggle()}}}var d=new Uint8Array(16);function p(){if(!c&&!(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(d)}var v=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var m=function(t){return"string"==typeof t&&v.test(t)},g=[],y=0;y<256;++y)g.push((y+256).toString(16).substr(1));var b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(g[t[e+0]]+g[t[e+1]]+g[t[e+2]]+g[t[e+3]]+"-"+g[t[e+4]]+g[t[e+5]]+"-"+g[t[e+6]]+g[t[e+7]]+"-"+g[t[e+8]]+g[t[e+9]]+"-"+g[t[e+10]]+g[t[e+11]]+g[t[e+12]]+g[t[e+13]]+g[t[e+14]]+g[t[e+15]]).toLowerCase();if(!m(n))throw TypeError("Stringified UUID is invalid");return n};var w=function(t,e,n){var r=(t=t||{}).random||(t.rng||p)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return b(r)};class k{constructor(t){this.color="#ff990a",this.colorHighlight="#ff1111",this.colorTopMarker="#ff00bb",this.morphaweb=t,this.morphaweb.wavesurfer.on("marker-click",this.onClick.bind(this))}addMarkers=t=>{for(let e of t)this.createMarker(e.position/1e3)};removeTopMarker(){const t=this.morphaweb.wavesurfer.markers.markers.map((t=>t.position)).indexOf("top");this.morphaweb.wavesurfer.markers.remove(t)}removeSelectedMarker(){const t=this.morphaweb.wavesurfer.markers.selectedMarker,e=this.getMarkerAtTime(t.time);this.morphaweb.wavesurfer.markers.remove(e)}highlightMarker(t){this.morphaweb.wavesurfer.markers.markers.map((e=>{"bottom"==e.position&&(e.time==t?e.el.children[1].children[0].children[0].setAttribute("fill",this.colorHighlight):e.el.children[1].children[0].children[0].setAttribute("fill",this.color))}))}getMarkerAtTime(t){return this.morphaweb.wavesurfer.markers.markers.map((t=>{if("bottom"==t.position)return t.time})).indexOf(t)}createMarker(t,e="bottom"){if("bottom"==e&&-1!=this.getMarkerAtTime(t))return!1;let n={time:t,position:"bottom",color:this.color,uuid:w(),draggable:!0};"top"==e&&(n.position="top",n.color=this.colorTopMarker),this.morphaweb.wavesurfer.addMarker(n)}createMarkerAtCurrentPosition(){this.createMarker(this.morphaweb.playOffset*this.morphaweb.wavesurfer.getDuration(),"bottom")}onClick(t){this.highlightMarker(t.time)}}const _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function A(t){let e="";for(let n=0;n<t.length;n+=3)e+=_[t[n]>>2],e+=_[(3&t[n])<<4|t[n+1]>>4],e+=_[(15&t[n+1])<<2|t[n+2]>>6],e+=_[63&t[n+2]];return t.length%3==2?e=e.substring(0,e.length-1)+"=":t.length%3==1&&(e=e.substring(0,e.length-2)+"=="),e}function C(t){let e=new Uint8Array(256);for(let t=0;t<_.length;t++)e[_.charCodeAt(t)]=t;let n=.75*t.length;"="===t[t.length-1]&&(n--,"="===t[t.length-2]&&n--);let r=new Uint8Array(n);for(let n=0,i=0;n<t.length;n+=4){let a=e[t.charCodeAt(n)],s=e[t.charCodeAt(n+1)],o=e[t.charCodeAt(n+2)],u=e[t.charCodeAt(n+3)];r[i++]=a<<2|s>>4,r[i++]=(15&s)<<4|o>>2,r[i++]=(3&o)<<6|63&u}return r}function P(t,e,n,r){if(["32f","64"].indexOf(e)>-1&&["32f","64"].indexOf(r)>-1)return void n.set(t);M(e),M(r);let i=function(t,e){let n=function(t){return t};t!=e&&(n=["32f","64"].includes(t)?x:["32f","64"].includes(e)?I:S);return n}(e,r),a={oldMin:Math.pow(2,parseInt(e,10))/2,newMin:Math.pow(2,parseInt(r,10))/2,oldMax:Math.pow(2,parseInt(e,10))/2-1,newMax:Math.pow(2,parseInt(r,10))/2-1};E(e,t,!0);for(let e=0,r=t.length;e<r;e++)n[e]=i(t[e],a);E(r,n,!1)}function S(t,e){return t=t>0?parseInt(t/e.oldMax*e.newMax,10):parseInt(t/e.oldMin*e.newMin,10)}function x(t,e){return parseInt(t>0?t*e.newMax:t*e.newMin,10)}function I(t,e){return t>0?t/e.oldMax:t/e.oldMin}function M(t){if("32f"!=t&&"64"!=t&&(parseInt(t,10)<"8"||parseInt(t,10)>"53"))throw new Error("Invalid bit depth.")}function E(t,e,n){if("8"==t){let t=n?-128:128;for(let n=0,r=e.length;n<r;n++)e[n]=e[n]+=t}}const O=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],j=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function R(t,e){let n=function(t,e){L(t,e);let n=[];return n.push(255&t),n.push(t>>8&255),n.push(e.index),n.push(0),n}(t[0],e);for(let r=3,i=t.length;r<i;r+=2){let i=L(t[r],e),a=L(t[r+1],e);n.push(a<<4|i)}return n}function T(t,e){var n;e.predicted=(n=t[1]<<8|t[0])>32768?n-65536:n,e.index=t[2],e.step=j[e.index];let r=[e.predicted,e.predicted];for(let n=4,i=t.length;n<i;n++){let i=t[n],a=i>>4,s=a<<4^i;r.push(D(s,e)),r.push(D(a,e))}return r}function L(t,e){let n=t-e.predicted,r=0;n>=0?r=0:(r=8,n=-n);let i=j[e.index],a=i>>3;return n>i&&(r|=4,n-=i,a+=i),i>>=1,n>i&&(r|=2,n-=i,a+=i),i>>=1,n>i&&(r|=1,a+=i),function(t,e,n){8&t?n.predicted-=e:n.predicted+=e;n.predicted<-32768?n.predicted=-32768:n.predicted>32767&&(n.predicted=32767);n.index+=O[7&t],n.index<0?n.index=0:n.index>88&&(n.index=88)}(r,a,e),r}function D(t,e){let n=0;return 4&t&&(n+=e.step),2&t&&(n+=e.step>>1),1&t&&(n+=e.step>>2),n+=e.step>>3,8&t&&(n=-n),e.predicted+=n,e.predicted>32767?e.predicted=32767:e.predicted<-32767&&(e.predicted=-32767),function(t,e){e.index+=O[t],e.index<0?e.index=0:e.index>88&&(e.index=88);e.step=j[e.index]}(t,e),e.predicted}const B=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function z(t){let e,n=~(t=-32768==t?-32767:t)>>8&128;if(n||(t*=-1),t>32635&&(t=32635),t>=256){let n=B[t>>8&127];e=n<<4|t>>n+3&15}else e=t>>4;return 85^e^n}function W(t){let e=0;0!=(128&(t^=85))&&(t&=-129,e=-1);let n=4+((240&t)>>4),r=0;return r=4!=n?1<<n|(15&t)<<n-4|1<<n-5:t<<1|1,r=0===e?r:-r,-8*r}const F=132,U=32635,V=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],N=[0,132,396,924,1980,4092,8316,16764];function H(t){let e,n,r,i;return e=t>>8&128,0!=e&&(t=-t),(t+=F)>U&&(t=U),n=V[t>>7&255],r=t>>n+3&15,i=~(e|n<<4|r),i}function X(t){let e,n,r,i;return e=128&(t=~t),n=t>>4&7,r=15&t,i=N[n]+(r<<n+3),0!=e&&(i=-i),i}function q(t,e,n=0,r=t.length){for(let i=n;i<r;i+=e)G(t,e,i)}function G(t,e,n){e--;for(let r=0;r<e;r++){let i=t[n+r];t[n+r]=t[n+e],t[n+e]=i,e--}}function $(t,e=0,n=t.length){let r="";for(let i=e;i<n;){let e=128,n=191,a=!1,s=t[i++];if(s>=0&&s<=127)r+=String.fromCharCode(s);else{let o=0;s>=194&&s<=223?o=1:s>=224&&s<=239?(o=2,224===t[i]&&(e=160),237===t[i]&&(n=159)):s>=240&&s<=244?(o=3,240===t[i]&&(e=144),244===t[i]&&(n=143)):a=!0,s&=(1<<8-o-1)-1;for(let r=0;r<o;r++)(t[i]<e||t[i]>n)&&(a=!0),s=s<<6|63&t[i],i++;a?r+=String.fromCharCode(65533):s<=65535?r+=String.fromCharCode(s):(s-=65536,r+=String.fromCharCode(55296+(s>>10&1023),56320+(1023&s)))}}return r}function Q(t,e,n=0){let r=0,i=t.length;for(;r<i;){let i=t.codePointAt(r);if(i<128)e[n]=i,n++;else{let t=0,a=0;for(i<=2047?(t=1,a=192):i<=65535?(t=2,a=224):i<=1114111&&(t=3,a=240,r++),e[n]=(i>>6*t)+a,n++;t>0;)e[n]=128|i>>6*(t-1)&63,n++,t--}r++}return n}class Z{constructor(t,e=!1){this.bits=t,this.offset=Math.ceil(t/8),this.max=Math.pow(2,t)-1,this.min=0,this.unpack=this.unpack_,e&&(this.max=Math.pow(2,t)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}pack(t,e,n=0){e=this.clamp_(Math.round(e));for(let r=0,i=this.offset;r<i;r++)t[n]=255&Math.floor(e/Math.pow(2,8*r)),n++;return n}unpack_(t,e=0){let n=0;for(let r=0;r<this.offset;r++)n+=t[e+r]*Math.pow(256,r);return n}unpackSigned_(t,e=0){return this.sign_(this.unpack_(t,e))}clamp_(t){return t>this.max?this.max:t<this.min?this.min:t}sign_(t){return t>this.max&&(t-=2*this.max+2),t}}class Y{constructor(t,e){this.offset=Math.ceil((t+e)/8),this.ebits=t,this.fbits=e,this.bias=(1<<t-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=t+e,this.fbias=Math.pow(2,-(8*this.offset-1-t))}pack(t,e,n){Math.abs(e)>this.biasP2-2*this.ebitsFbits&&(e=e<0?-1/0:1/0);let r=((e=+e)||1/e)<0||e<0?1:0;e=Math.abs(e);let i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),a=J(e/Math.pow(2,i)*Math.pow(2,this.fbits));return e!=e?(a=Math.pow(2,this.fbits-1),i=(1<<this.ebits)-1):0!==e&&(e>=Math.pow(2,1-this.bias)?(a/Math.pow(2,this.fbits)>=2&&(i+=1,a=1),i>this.bias?(i=(1<<this.ebits)-1,a=0):(i+=this.bias,a=J(a)-Math.pow(2,this.fbits))):(a=J(e/Math.pow(2,1-this.bias-this.fbits)),i=0)),this.packFloatBits_(t,n,r,i,a)}unpack(t,e){let n,r=(1<<this.ebits)-1,i="";for(let n=this.offset-1;n>=0;n--){let r=t[n+e].toString(2);i+="00000000".substring(r.length)+r}let a="1"==i.charAt(0)?-1:1;i=i.substring(1);let s=parseInt(i.substring(0,this.ebits),2);return i=i.substring(this.ebits),s==r?0!==parseInt(i,2)?NaN:a*(1/0):(0===s?(s+=1,n=parseInt(i,2)):n=parseInt("1"+i,2),a*n*this.fbias*Math.pow(2,s-this.bias))}packFloatBits_(t,e,n,r,i){let a=[];a.push(n);for(let t=this.ebits;t>0;t-=1)a[t]=r%2?1:0,r=Math.floor(r/2);let s=a.length;for(let t=this.fbits;t>0;t-=1)a[s+t]=i%2?1:0,i=Math.floor(i/2);let o=a.join(""),u=this.offset+e-1,l=e;for(;u>=e;)t[u]=parseInt(o.substring(0,8),2),o=o.substring(8),u--,l++;return l}}function J(t){let e=Math.floor(t),n=t-e;return n<.5?e:n>.5||e%2?e+1:e}function K(t,e=0,n=t.length){return $(t,e,n)}function tt(t){let e=[];return Q(t,e),e}function et(t,e,n=0){return Q(t,e,n)}function nt(t,e,n,r=0){let i=ut((e=e||{}).bits,e.fp,e.signed),a=Math.ceil(e.bits/8),s=0,o=r;for(let e=t.length;s<e;s++)r=i.pack(n,t[s],r);return e.be&&q(n,a,o,r),r}function rt(t,e,n,r=0,i=t.length){let a=ut((e=e||{}).bits,e.fp,e.signed);if(i=function(t,e,n,r){let i=(n-e)%r;return n-i}(0,r,i,a.offset),e.be){let s=function(t){return new Uint8Array(t)}(t);e.be&&q(s,a.offset,r,i),ot(s,n,r,i,a)}else ot(t,n,r,i,a)}function it(t,e,n,r=0){return nt([t],e,n,r)}function at(t,e){let n=[];return it(t,e,n,0),n}function st(t,e,n=0){let r=[];return rt(t,e,r,n,n+Math.ceil(e.bits/8)),r[0]}function ot(t,e,n,r,i){let a=i.offset;for(let s=0,o=n;o<r;o+=a,s++)e[s]=i.unpack(t,o)}function ut(t,e,n){return e&&32==t?new Y(8,23):e&&64==t?new Y(11,52):new Z(t,n)}class lt{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(t){if(this.head=0,this.container=this.readString(t,4),-1===this.supported_containers.indexOf(this.container))throw Error("Not a supported format.");this.uInt32.be="RIFX"===this.container,this.chunkSize=this.readUInt32(t),this.format=this.readString(t,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(t)}}findChunk(t,e=!1){let n=this.signature.subChunks,r=[];for(let i=0;i<n.length;i++)if(n[i].chunkId==t){if(!e)return n[i];r.push(n[i])}return"LIST"==t&&r.length?r:null}readString(t,e){let n="";return n=K(t,this.head,this.head+e),this.head+=e,n}readUInt32(t){let e=st(t,this.uInt32,this.head);return this.head+=4,e}getSubChunksIndex_(t){let e=[],n=this.head;for(;n<=t.length-8;)e.push(this.getSubChunkIndex_(t,n)),n+=8+e[e.length-1].chunkSize,n=n%2?n+1:n;return e}getSubChunkIndex_(t,e){let n={chunkId:this.getChunkId_(t,e),chunkSize:this.getChunkSize_(t,e)};if("LIST"==n.chunkId)n.format=K(t,e+8,e+12),this.head+=4,n.subChunks=this.getSubChunksIndex_(t);else{let t=n.chunkSize%2?n.chunkSize+1:n.chunkSize;this.head=e+8+t,n.chunkData={start:e+8,end:this.head}}return n}getChunkId_(t,e){return this.head+=4,K(t,e,e+4)}getChunkSize_(t,e){return this.head+=4,st(t,this.uInt32,e+4)}}class ct extends lt{constructor(){super(),this.supported_containers.push("RF64"),this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},this.fact={chunkId:"",chunkSize:0,dwSampleLength:0},this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},this.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},this.iXML={chunkId:"",chunkSize:0,value:""},this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},this.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},this.LIST=[],this.junk={chunkId:"",chunkSize:0,chunkData:[]},this._PMX={chunkId:"",chunkSize:0,value:""},this.uInt16={bits:16,be:!1,signed:!1,fp:!1}}fromBuffer(t,e=!0){if(this.clearHeaders(),this.setSignature(t),this.uInt16.be=this.uInt32.be,"WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(t),this.readFmtChunk_(t),this.readFactChunk_(t),this.readBextChunk_(t),this.readiXMLChunk_(t),this.readCueChunk_(t),this.readSmplChunk_(t),this.readDataChunk_(t,e),this.readJunkChunk_(t),this.readLISTChunk_(t),this.read_PMXChunk_(t)}clearHeaders(){let t=new ct;Object.assign(this.fmt,t.fmt),Object.assign(this.fact,t.fact),Object.assign(this.cue,t.cue),Object.assign(this.smpl,t.smpl),Object.assign(this.bext,t.bext),Object.assign(this.iXML,t.iXML),Object.assign(this.ds64,t.ds64),Object.assign(this.data,t.data),this.LIST=[],Object.assign(this.junk,t.junk),Object.assign(this._PMX,t._PMX)}readFmtChunk_(t){let e=this.findChunk("fmt ");if(!e)throw Error('Could not find the "fmt " chunk');this.head=e.chunkData.start,this.fmt.chunkId=e.chunkId,this.fmt.chunkSize=e.chunkSize,this.fmt.audioFormat=this.readUInt16_(t),this.fmt.numChannels=this.readUInt16_(t),this.fmt.sampleRate=this.readUInt32(t),this.fmt.byteRate=this.readUInt32(t),this.fmt.blockAlign=this.readUInt16_(t),this.fmt.bitsPerSample=this.readUInt16_(t),this.readFmtExtension_(t)}readFmtExtension_(t){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(t),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(t),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(t),this.fmt.subformat=[this.readUInt32(t),this.readUInt32(t),this.readUInt32(t),this.readUInt32(t)])))}readFactChunk_(t){let e=this.findChunk("fact");e&&(this.head=e.chunkData.start,this.fact.chunkId=e.chunkId,this.fact.chunkSize=e.chunkSize,this.fact.dwSampleLength=this.readUInt32(t))}readCueChunk_(t){let e=this.findChunk("cue ");if(e){this.head=e.chunkData.start,this.cue.chunkId=e.chunkId,this.cue.chunkSize=e.chunkSize,this.cue.dwCuePoints=this.readUInt32(t);for(let e=0;e<this.cue.dwCuePoints;e++)this.cue.points.push({dwName:this.readUInt32(t),dwPosition:this.readUInt32(t),fccChunk:this.readString(t,4),dwChunkStart:this.readUInt32(t),dwBlockStart:this.readUInt32(t),dwSampleOffset:this.readUInt32(t)})}}readSmplChunk_(t){let e=this.findChunk("smpl");if(e){this.head=e.chunkData.start,this.smpl.chunkId=e.chunkId,this.smpl.chunkSize=e.chunkSize,this.smpl.dwManufacturer=this.readUInt32(t),this.smpl.dwProduct=this.readUInt32(t),this.smpl.dwSamplePeriod=this.readUInt32(t),this.smpl.dwMIDIUnityNote=this.readUInt32(t),this.smpl.dwMIDIPitchFraction=this.readUInt32(t),this.smpl.dwSMPTEFormat=this.readUInt32(t),this.smpl.dwSMPTEOffset=this.readUInt32(t),this.smpl.dwNumSampleLoops=this.readUInt32(t),this.smpl.dwSamplerData=this.readUInt32(t);for(let e=0;e<this.smpl.dwNumSampleLoops;e++)this.smpl.loops.push({dwName:this.readUInt32(t),dwType:this.readUInt32(t),dwStart:this.readUInt32(t),dwEnd:this.readUInt32(t),dwFraction:this.readUInt32(t),dwPlayCount:this.readUInt32(t)})}}readDataChunk_(t,e){let n=this.findChunk("data");if(!n)throw Error('Could not find the "data" chunk');this.data.chunkId="data",this.data.chunkSize=n.chunkSize,e&&(this.data.samples=t.slice(n.chunkData.start,n.chunkData.end))}readBextChunk_(t){let e=this.findChunk("bext");e&&(this.head=e.chunkData.start,this.bext.chunkId=e.chunkId,this.bext.chunkSize=e.chunkSize,this.bext.description=this.readString(t,256),this.bext.originator=this.readString(t,32),this.bext.originatorReference=this.readString(t,32),this.bext.originationDate=this.readString(t,10),this.bext.originationTime=this.readString(t,8),this.bext.timeReference=[this.readUInt32(t),this.readUInt32(t)],this.bext.version=this.readUInt16_(t),this.bext.UMID=this.readString(t,64),this.bext.loudnessValue=this.readUInt16_(t),this.bext.loudnessRange=this.readUInt16_(t),this.bext.maxTruePeakLevel=this.readUInt16_(t),this.bext.maxMomentaryLoudness=this.readUInt16_(t),this.bext.maxShortTermLoudness=this.readUInt16_(t),this.bext.reserved=this.readString(t,180),this.bext.codingHistory=this.readString(t,this.bext.chunkSize-602))}readiXMLChunk_(t){let e=this.findChunk("iXML");e&&(this.head=e.chunkData.start,this.iXML.chunkId=e.chunkId,this.iXML.chunkSize=e.chunkSize,this.iXML.value=K(t,this.head,this.head+this.iXML.chunkSize))}readDs64Chunk_(t){let e=this.findChunk("ds64");if(e)this.head=e.chunkData.start,this.ds64.chunkId=e.chunkId,this.ds64.chunkSize=e.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(t),this.ds64.riffSizeLow=this.readUInt32(t),this.ds64.dataSizeHigh=this.readUInt32(t),this.ds64.dataSizeLow=this.readUInt32(t),this.ds64.originationTime=this.readUInt32(t),this.ds64.sampleCountHigh=this.readUInt32(t),this.ds64.sampleCountLow=this.readUInt32(t);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')}readLISTChunk_(t){let e=this.findChunk("LIST",!0);if(null!==e)for(let n=0;n<e.length;n++){let r=e[n];this.LIST.push({chunkId:r.chunkId,chunkSize:r.chunkSize,format:r.format,subChunks:[]});for(let e=0;e<r.subChunks.length;e++)this.readLISTSubChunks_(r.subChunks[e],r.format,t)}}readLISTSubChunks_(t,e,n){"adtl"==e?["labl","note","ltxt"].indexOf(t.chunkId)>-1&&this.readLISTadtlSubChunks_(n,t):"INFO"==e&&this.readLISTINFOSubChunks_(n,t)}readLISTadtlSubChunks_(t,e){this.head=e.chunkData.start;let n={chunkId:e.chunkId,chunkSize:e.chunkSize,dwName:this.readUInt32(t)};"ltxt"==e.chunkId?(n.dwSampleLength=this.readUInt32(t),n.dwPurposeID=this.readUInt32(t),n.dwCountry=this.readUInt16_(t),n.dwLanguage=this.readUInt16_(t),n.dwDialect=this.readUInt16_(t),n.dwCodePage=this.readUInt16_(t),n.value=""):n.value=this.readZSTR_(t,this.head),this.LIST[this.LIST.length-1].subChunks.push(n)}readLISTINFOSubChunks_(t,e){this.head=e.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:e.chunkId,chunkSize:e.chunkSize,value:this.readZSTR_(t,this.head)})}readJunkChunk_(t){let e=this.findChunk("junk");e&&(this.junk={chunkId:e.chunkId,chunkSize:e.chunkSize,chunkData:[].slice.call(t.slice(e.chunkData.start,e.chunkData.end))})}read_PMXChunk_(t){let e=this.findChunk("_PMX");e&&(this.head=e.chunkData.start,this._PMX.chunkId=e.chunkId,this._PMX.chunkSize=e.chunkSize,this._PMX.value=K(t,this.head,this.head+this._PMX.chunkSize))}readZSTR_(t,e=0){for(let n=e;n<t.length&&(this.head++,0!==t[n]);n++);return K(t,e,this.head-1)}readUInt16_(t){let e=st(t,this.uInt16,this.head);return this.head+=2,e}}function ht(t,e){let n=tt(t);for(let t=n.length;t<e;t++)n.push(0);return n}class ft extends ct{toBuffer(){this.uInt16.be="RIFX"===this.container,this.uInt32.be=this.uInt16.be;let t=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),tt(this.data.chunkId),at(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],e=0;for(let n=0;n<t.length;n++)e+=t[n].length;let n=new Uint8Array(e+12),r=0;r=et(this.container,n,r),r=it(e+4,this.uInt32,n,r),r=et(this.format,n,r);for(let e=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n}getBextBytes_(){let t=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,t=t.concat(tt(this.bext.chunkId),at(602+this.bext.codingHistory.length,this.uInt32),ht(this.bext.description,256),ht(this.bext.originator,32),ht(this.bext.originatorReference,32),ht(this.bext.originationDate,10),ht(this.bext.originationTime,8),at(this.bext.timeReference[0],this.uInt32),at(this.bext.timeReference[1],this.uInt32),at(this.bext.version,this.uInt16),ht(this.bext.UMID,64),at(this.bext.loudnessValue,this.uInt16),at(this.bext.loudnessRange,this.uInt16),at(this.bext.maxTruePeakLevel,this.uInt16),at(this.bext.maxMomentaryLoudness,this.uInt16),at(this.bext.maxShortTermLoudness,this.uInt16),ht(this.bext.reserved,180),ht(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(t),t}enforceBext_(){for(let t in this.bext)if(this.bext.hasOwnProperty(t)&&this.bext[t]&&"timeReference"!=t){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}getiXMLBytes_(){let t=[];if(this.iXML.chunkId){let e=tt(this.iXML.value);this.iXML.chunkSize=e.length,t=t.concat(tt(this.iXML.chunkId),at(this.iXML.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}getDs64Bytes_(){let t=[];return this.ds64.chunkId&&(t=t.concat(tt(this.ds64.chunkId),at(this.ds64.chunkSize,this.uInt32),at(this.ds64.riffSizeHigh,this.uInt32),at(this.ds64.riffSizeLow,this.uInt32),at(this.ds64.dataSizeHigh,this.uInt32),at(this.ds64.dataSizeLow,this.uInt32),at(this.ds64.originationTime,this.uInt32),at(this.ds64.sampleCountHigh,this.uInt32),at(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(t),t}getCueBytes_(){let t=[];if(this.cue.chunkId){let e=this.getCuePointsBytes_();t=t.concat(tt(this.cue.chunkId),at(e.length+4,this.uInt32),at(this.cue.dwCuePoints,this.uInt32),e)}return this.enforceByteLen_(t),t}getCuePointsBytes_(){let t=[];for(let e=0;e<this.cue.dwCuePoints;e++)t=t.concat(at(this.cue.points[e].dwName,this.uInt32),at(this.cue.points[e].dwPosition,this.uInt32),tt(this.cue.points[e].fccChunk),at(this.cue.points[e].dwChunkStart,this.uInt32),at(this.cue.points[e].dwBlockStart,this.uInt32),at(this.cue.points[e].dwSampleOffset,this.uInt32));return t}getSmplBytes_(){let t=[];if(this.smpl.chunkId){let e=this.getSmplLoopsBytes_();t=t.concat(tt(this.smpl.chunkId),at(e.length+36,this.uInt32),at(this.smpl.dwManufacturer,this.uInt32),at(this.smpl.dwProduct,this.uInt32),at(this.smpl.dwSamplePeriod,this.uInt32),at(this.smpl.dwMIDIUnityNote,this.uInt32),at(this.smpl.dwMIDIPitchFraction,this.uInt32),at(this.smpl.dwSMPTEFormat,this.uInt32),at(this.smpl.dwSMPTEOffset,this.uInt32),at(this.smpl.dwNumSampleLoops,this.uInt32),at(this.smpl.dwSamplerData,this.uInt32),e)}return this.enforceByteLen_(t),t}getSmplLoopsBytes_(){let t=[];for(let e=0;e<this.smpl.dwNumSampleLoops;e++)t=t.concat(at(this.smpl.loops[e].dwName,this.uInt32),at(this.smpl.loops[e].dwType,this.uInt32),at(this.smpl.loops[e].dwStart,this.uInt32),at(this.smpl.loops[e].dwEnd,this.uInt32),at(this.smpl.loops[e].dwFraction,this.uInt32),at(this.smpl.loops[e].dwPlayCount,this.uInt32));return t}getFactBytes_(){let t=[];return this.fact.chunkId&&(t=t.concat(tt(this.fact.chunkId),at(this.fact.chunkSize,this.uInt32),at(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(t),t}getFmtBytes_(){let t=[];if(this.fmt.chunkId){let e=t.concat(tt(this.fmt.chunkId),at(this.fmt.chunkSize,this.uInt32),at(this.fmt.audioFormat,this.uInt16),at(this.fmt.numChannels,this.uInt16),at(this.fmt.sampleRate,this.uInt32),at(this.fmt.byteRate,this.uInt32),at(this.fmt.blockAlign,this.uInt16),at(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(e),e}throw Error('Could not find the "fmt " chunk')}getFmtExtensionBytes_(){let t=[];return this.fmt.chunkSize>16&&(t=t.concat(at(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(t=t.concat(at(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(t=t.concat(at(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(t=t.concat(at(this.fmt.subformat[0],this.uInt32),at(this.fmt.subformat[1],this.uInt32),at(this.fmt.subformat[2],this.uInt32),at(this.fmt.subformat[3],this.uInt32))),t}getLISTBytes_(){let t=[];for(let e=0;e<this.LIST.length;e++){let n=this.getLISTSubChunksBytes_(this.LIST[e].subChunks,this.LIST[e].format);t=t.concat(tt(this.LIST[e].chunkId),at(n.length+4,this.uInt32),tt(this.LIST[e].format),n)}return this.enforceByteLen_(t),t}getLISTSubChunksBytes_(t,e){let n=[];for(let r=0,i=t.length;r<i;r++)"INFO"==e?n=n.concat(this.getLISTINFOSubChunksBytes_(t[r])):"adtl"==e&&(n=n.concat(this.getLISTadtlSubChunksBytes_(t[r]))),this.enforceByteLen_(n);return n}getLISTINFOSubChunksBytes_(t){let e=[],n=ht(t.value,t.value.length);return e=e.concat(tt(t.chunkId),at(n.length+1,this.uInt32),n),e.push(0),e}getLISTadtlSubChunksBytes_(t){let e=[];if(["labl","note"].indexOf(t.chunkId)>-1){let n=ht(t.value,t.value.length);e=e.concat(tt(t.chunkId),at(n.length+4+1,this.uInt32),at(t.dwName,this.uInt32),n),e.push(0)}else"ltxt"==t.chunkId&&(e=e.concat(this.getLtxtChunkBytes_(t)));return e}getLtxtChunkBytes_(t){return[].concat(tt(t.chunkId),at(t.value.length+20,this.uInt32),at(t.dwName,this.uInt32),at(t.dwSampleLength,this.uInt32),at(t.dwPurposeID,this.uInt32),at(t.dwCountry,this.uInt16),at(t.dwLanguage,this.uInt16),at(t.dwDialect,this.uInt16),at(t.dwCodePage,this.uInt16),ht(t.value,t.value.length))}get_PMXBytes_(){let t=[];if(this._PMX.chunkId){let e=tt(this._PMX.value);this._PMX.chunkSize=e.length,t=t.concat(tt(this._PMX.chunkId),at(this._PMX.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}getJunkBytes_(){let t=[];return this.junk.chunkId?t.concat(tt(this.junk.chunkId),at(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(t),t)}enforceByteLen_(t){t.length%2&&t.push(0)}}function dt(t){let e=[];if(t.length>0)if(t[0].constructor!==Number){e=new Float64Array(t[0].length*t.length);for(let n=0,r=t[0].length,i=0;n<r;n++)for(let r=0,a=t.length;r<a;r++,i++)e[i]=t[r][n]}else e=t;return e}function pt(t,e,n=Float64Array){let r=[];for(let i=0;i<e;i++)r[i]=new n(t.length/e);for(let n=0;n<e;n++)for(let i=n,a=0;i<t.length;i+=e,a++)r[n][a]=t[i];return r}function vt(t,e,n){return!(n<1||t*(e/8)*n>4294967295)}class mt extends ft{constructor(){super(),this.bitDepth="0",this.dataType={bits:0,be:!1},this.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3}}fromScratch(t,e,n,r,i){i=i||{},this.clearHeaders(),this.newWavFile_(t,e,n,r,i)}fromBuffer(t,e=!0){super.fromBuffer(t,e),this.bitDepthFromFmt_(),this.updateDataType_()}toBuffer(){return this.validateWavHeader_(),super.toBuffer()}getSamples(t=!1,e=Float64Array){let n=new e(this.data.samples.length/(this.dataType.bits/8));return rt(this.data.samples,this.dataType,n,0,this.data.samples.length),!t&&this.fmt.numChannels>1?pt(n,this.fmt.numChannels,e):n}getSample(t){if((t*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return st(this.data.samples.slice(t,t+this.dataType.bits/8),this.dataType)}setSample(t,e){if((t*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");it(e,this.dataType,this.data.samples,t)}getiXML(){return this.iXML.value}setiXML(t){if("string"!=typeof t)throw new TypeError("iXML value must be a string.");this.iXML.value=t,this.iXML.chunkId="iXML"}get_PMX(){return this._PMX.value}set_PMX(t){if("string"!=typeof t)throw new TypeError("_PMX value must be a string.");this._PMX.value=t,this._PMX.chunkId="_PMX"}newWavFile_(t,e,n,r,i){i.container||(i.container="RIFF"),this.container=i.container,this.bitDepth=n,r=dt(r),this.updateDataType_();let a=this.dataType.bits/8;this.data.samples=new Uint8Array(r.length*a),nt(r,this.dataType,this.data.samples,0),this.makeWavHeader_(n,t,e,a,this.data.samples.length,i),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}makeWavHeader_(t,e,n,r,i,a){"4"==t?this.createADPCMHeader_(t,e,n,r,i,a):"8a"==t||"8m"==t?this.createALawMulawHeader_(t,e,n,r,i,a):-1==Object.keys(this.WAV_AUDIO_FORMATS).indexOf(t)||e>2?this.createExtensibleHeader_(t,e,n,r,i,a):this.createPCMHeader_(t,e,n,r,i,a)}createPCMHeader_(t,e,n,r,i,a){this.container=a.container,this.chunkSize=36+i,this.format="WAVE",this.bitDepth=t,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[t]||65534,numChannels:e,sampleRate:n,byteRate:e*r*n,blockAlign:e*r,bitsPerSample:parseInt(t,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}createADPCMHeader_(t,e,n,r,i,a){this.createPCMHeader_(t,e,n,r,i,a),this.chunkSize=40+i,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*i}}createExtensibleHeader_(t,e,n,r,i,a){this.createPCMHeader_(t,e,n,r,i,a),this.chunkSize=60+i,this.fmt.chunkSize=40,this.fmt.bitsPerSample=1+(parseInt(t,10)-1|7),this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(t,10),this.fmt.dwChannelMask=function(t){let e=0;1===t?e=4:2===t?e=3:4===t?e=51:6===t?e=63:8===t&&(e=1599);return e}(e),this.fmt.subformat=[1,1048576,2852126848,1905997824]}createALawMulawHeader_(t,e,n,r,i,a){this.createPCMHeader_(t,e,n,r,i,a),this.chunkSize=40+i,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:i}}bitDepthFromFmt_(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}validateBitDepth_(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}updateDataType_(){this.dataType={bits:1+(parseInt(this.bitDepth,10)-1|7),fp:"32f"==this.bitDepth||"64"==this.bitDepth,signed:"8"!=this.bitDepth,be:"RIFX"==this.container},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}validateWavHeader_(){if(this.validateBitDepth_(),t=this.fmt.numChannels,e=this.fmt.bitsPerSample,t<1||t*e/8>65535)throw new Error("Invalid number of channels.");var t,e;if(!vt(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}class gt extends mt{getTag(t){let e=this.getTagIndex_(t);return null!==e.TAG?this.LIST[e.LIST].subChunks[e.TAG].value:null}setTag(t,e){t=function(t){if(t.constructor!==String)throw new Error("Invalid tag name.");if(t.length<4)for(let e=0,n=4-t.length;e<n;e++)t+=" ";return t}(t);let n=this.getTagIndex_(t);null!==n.TAG?(this.LIST[n.LIST].subChunks[n.TAG].chunkSize=e.length+1,this.LIST[n.LIST].subChunks[n.TAG].value=e):null!==n.LIST?this.LIST[n.LIST].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}):(this.LIST.push({chunkId:"LIST",chunkSize:8+e.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}))}deleteTag(t){let e=this.getTagIndex_(t);return null!==e.TAG&&(this.LIST[e.LIST].subChunks.splice(e.TAG,1),!0)}listTags(){let t=this.getLISTIndex("INFO"),e={};if(null!==t)for(let n=0,r=this.LIST[t].subChunks.length;n<r;n++)e[this.LIST[t].subChunks[n].chunkId]=this.LIST[t].subChunks[n].value;return e}getLISTIndex(t){for(let e=0,n=this.LIST.length;e<n;e++)if(this.LIST[e].format==t)return e;return null}getTagIndex_(t){let e={LIST:null,TAG:null};for(let n=0,r=this.LIST.length;n<r;n++)if("INFO"==this.LIST[n].format){e.LIST=n;for(let r=0,i=this.LIST[n].subChunks.length;r<i;r++)if(this.LIST[n].subChunks[r].chunkId==t){e.TAG=r;break}break}return e}}class yt extends gt{listCuePoints(){let t=this.getCuePoints_();for(let e=0,n=t.length;e<n;e++)t[e].position=t[e].dwSampleOffset/this.fmt.sampleRate*1e3,t[e].dwSampleLength?(t[e].end=t[e].dwSampleLength/this.fmt.sampleRate*1e3,t[e].end+=t[e].position):t[e].end=null,delete t[e].value;return t}setCuePoint(t){this.cue.chunkId="cue ",t.label||(t.label="");let e=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],t.dwSampleOffset=t.position*this.fmt.sampleRate/1e3,t.dwSampleLength=0,t.end&&(t.dwSampleLength=t.end*this.fmt.sampleRate/1e3-t.dwSampleOffset),0===e.length?this.setCuePoint_(t,1):this.setCuePointInOrder_(e,t),this.cue.dwCuePoints=this.cue.points.length}deleteCuePoint(t){this.cue.chunkId="cue ";let e=this.getCuePoints_();this.clearLISTadtl_();let n=this.cue.points.length;this.cue.points=[];for(let r=0;r<n;r++)r+1!==t&&this.setCuePoint_(e[r],r+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}updateLabel(t,e){let n=this.getLISTIndex("adtl");if(null!==n)for(let r=0,i=this.LIST[n].subChunks.length;r<i;r++)this.LIST[n].subChunks[r].dwName==t&&(this.LIST[n].subChunks[r].value=e)}getCuePoints_(){let t=[];for(let e=0;e<this.cue.points.length;e++){let n=this.cue.points[e],r=this.getDataForCuePoint_(n.dwName);r.label=r.value?r.value:"",r.dwPosition=n.dwPosition,r.fccChunk=n.fccChunk,r.dwChunkStart=n.dwChunkStart,r.dwBlockStart=n.dwBlockStart,r.dwSampleOffset=n.dwSampleOffset,t.push(r)}return t}getDataForCuePoint_(t){let e=this.getLISTIndex("adtl"),n={};return null!==e&&this.getCueDataFromLIST_(n,e,t),n}getCueDataFromLIST_(t,e,n){for(let r=0,i=this.LIST[e].subChunks.length;r<i;r++)if(this.LIST[e].subChunks[r].dwName==n){let n=this.LIST[e].subChunks[r];t.value=n.value||t.value,t.dwName=n.dwName||0,t.dwSampleLength=n.dwSampleLength||0,t.dwPurposeID=n.dwPurposeID||0,t.dwCountry=n.dwCountry||0,t.dwLanguage=n.dwLanguage||0,t.dwDialect=n.dwDialect||0,t.dwCodePage=n.dwCodePage||0}}setCuePoint_(t,e){this.cue.points.push({dwName:e,dwPosition:t.dwPosition?t.dwPosition:0,fccChunk:t.fccChunk?t.fccChunk:"data",dwChunkStart:t.dwChunkStart?t.dwChunkStart:0,dwBlockStart:t.dwBlockStart?t.dwBlockStart:0,dwSampleOffset:t.dwSampleOffset}),this.setLabl_(t,e)}setCuePointInOrder_(t,e){let n=!1;for(let r=0;r<t.length;r++)t[r].dwSampleOffset>e.dwSampleOffset&&!n?(this.setCuePoint_(e,r+1),this.setCuePoint_(t[r],r+2),n=!0):this.setCuePoint_(t[r],n?r+2:r+1);n||this.setCuePoint_(e,this.cue.points.length+1)}clearLISTadtl_(){for(let t=0,e=this.LIST.length;t<e;t++)"adtl"==this.LIST[t].format&&this.LIST.splice(t)}setLabl_(t,e){let n=this.getLISTIndex("adtl");null===n&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),n=this.LIST.length-1),this.setLabelText_(n,t,e),t.dwSampleLength&&this.setLtxtChunk_(n,t,e)}setLabelText_(t,e,n){this.LIST[t].subChunks.push({chunkId:"labl",chunkSize:4,dwName:n,value:e.label}),this.LIST[t].chunkSize+=12}setLtxtChunk_(t,e,n){this.LIST[t].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:n,dwSampleLength:e.dwSampleLength,dwPurposeID:e.dwPurposeID||0,dwCountry:e.dwCountry||0,dwLanguage:e.dwLanguage||0,dwDialect:e.dwDialect||0,dwCodePage:e.dwCodePage||0,value:e.label}),this.LIST[t].chunkSize+=28}}class bt{constructor(t,e,n){this.length_=t,this.scaleFactor_=(t-1)/e,this.interpolate=this.sinc,"point"===n.method?this.interpolate=this.point:"linear"===n.method?this.interpolate=this.linear:"cubic"===n.method&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,n.tension||0)),this.sincFilterSize_=n.sincFilterSize||1,this.kernel_=function(t){return function(e){return function(t){return 0===t?1:Math.sin(Math.PI*t)/(Math.PI*t)}(e)*t(e)}}(n.sincWindow||wt)}point(t,e){return this.getClippedInput_(Math.round(this.scaleFactor_*t),e)}linear(t,e){t=this.scaleFactor_*t;let n=Math.floor(t);return(1-(t-=n))*this.getClippedInput_(n,e)+t*this.getClippedInput_(n+1,e)}cubic(t,e){t=this.scaleFactor_*t;let n=Math.floor(t),r=[this.getTangent_(n,e),this.getTangent_(n+1,e)],i=[this.getClippedInput_(n,e),this.getClippedInput_(n+1,e)],a=(t-=n)*t,s=t*a;return(2*s-3*a+1)*i[0]+(s-2*a+t)*r[0]+(-2*s+3*a)*i[1]+(s-a)*r[1]}sinc(t,e){t=this.scaleFactor_*t;let n=Math.floor(t),r=n-this.sincFilterSize_+1,i=n+this.sincFilterSize_,a=0;for(let n=r;n<=i;n++)a+=this.kernel_(t-n)*this.getClippedInput_(n,e);return a}getTangent_(t,e){return this.tangentFactor_*(this.getClippedInput_(t+1,e)-this.getClippedInput_(t-1,e))/2}getClippedInput_(t,e){return 0<=t&&t<this.length_?e[t]:0}}function wt(t){return Math.exp(-t/2*t/2)}const kt={point:!1,linear:!1,cubic:!0,sinc:!0},_t={IIR:16,FIR:71},At={IIR:class{constructor(t,e,n){let r=[];for(let i=0;i<t;i++)r.push(this.getCoeffs_({Fs:e,Fc:n,Q:.5/Math.sin(Math.PI/(2*t)*(i+.5))}));this.stages=[];for(let t=0;t<r.length;t++)this.stages[t]={b0:r[t].b[0],b1:r[t].b[1],b2:r[t].b[2],a1:r[t].a[0],a2:r[t].a[1],k:r[t].k,z:[0,0]}}filter(t){let e=t;for(let t=0,n=this.stages.length;t<n;t++)e=this.runStage_(t,e);return e}getCoeffs_(t){let e={a:[],b:[]},n=this.preCalc_(t,e);return e.k=1,e.b.push((1-n.cw)/(2*n.a0)),e.b.push(2*e.b[0]),e.b.push(e.b[0]),e}preCalc_(t,e){let n={},r=2*Math.PI*t.Fc/t.Fs;return n.alpha=Math.sin(r)/(2*t.Q),n.cw=Math.cos(r),n.a0=1+n.alpha,e.a0=n.a0,e.a.push(-2*n.cw/n.a0),e.k=1,e.a.push((1-n.alpha)/n.a0),n}runStage_(t,e){let n=e*this.stages[t].k-this.stages[t].a1*this.stages[t].z[0]-this.stages[t].a2*this.stages[t].z[1],r=this.stages[t].b0*n+this.stages[t].b1*this.stages[t].z[0]+this.stages[t].b2*this.stages[t].z[1];return this.stages[t].z[1]=this.stages[t].z[0],this.stages[t].z[0]=n,r}reset(){for(let t=0;t<this.stages.length;t++)this.stages[t].z=[0,0]}},FIR:class{constructor(t,e,n){let r=2*Math.PI*n/e,i=0;this.filters=[];for(let e=0;e<=t;e++)e-t/2==0?this.filters[e]=r:(this.filters[e]=Math.sin(r*(e-t/2))/(e-t/2),this.filters[e]*=.54-.46*Math.cos(2*Math.PI*e/t)),i+=this.filters[e];for(let e=0;e<=t;e++)this.filters[e]/=i;this.z=this.initZ_()}filter(t){this.z.buf[this.z.pointer]=t;let e=0;for(let t=0,n=this.z.buf.length;t<n;t++)e+=this.filters[t]*this.z.buf[(this.z.pointer+t)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,e}reset(){this.z=this.initZ_()}initZ_(){let t=[];for(let e=0;e<this.filters.length-1;e++)t.push(0);return{buf:t,pointer:0}}}};function Ct(t,e,n,r=null){r=r||{};let i=(n-e)/e+1,a=new Float64Array(t.length*i);r.method=r.method||"cubic";let s=new bt(t.length,a.length,{method:r.method,tension:r.tension||0,sincFilterSize:r.sincFilterSize||6,sincWindow:r.sincWindow||void 0,clip:r.clip||"mirror"});if(void 0===r.LPF&&(r.LPF=kt[r.method]),r.LPF){r.LPFType=r.LPFType||"IIR";const i=At[r.LPFType];if(n>e){!function(t,e,n,r){for(let i=0,a=e.length;i<a;i++)e[i]=r.filter(n.interpolate(i,t));r.reset();for(let t=e.length-1;t>=0;t--)e[t]=r.filter(e[t])}(t,a,s,new i(r.LPForder||_t[r.LPFType],n,e/2))}else{!function(t,e,n,r){for(let e=0,n=t.length;e<n;e++)t[e]=r.filter(t[e]);r.reset();for(let e=t.length-1;e>=0;e--)t[e]=r.filter(t[e]);Pt(t,e,n)}(t,a,s,new i(r.LPForder||_t[r.LPFType],e,n/2))}}else Pt(t,a,s);return a}function Pt(t,e,n){for(let r=0,i=e.length;r<i;r++)e[r]=n.interpolate(r,t)}class St extends yt{toRIFF(){let t=new Float64Array(xt(this.data.samples.length,this.dataType.bits/8));rt(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFF"})}toRIFX(){let t=new Float64Array(xt(this.data.samples.length,this.dataType.bits/8));rt(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFX"})}toIMAADPCM(){if(8e3!==this.fmt.sampleRate)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw new Error("Only mono files can be compressed as IMA-ADPCM.");{this.assure16Bit_();let t=new Int16Array(xt(this.data.samples.length,2));rt(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",function(t){let e={index:0,predicted:0,step:7},n=new Uint8Array(t.length),r=[],i=0,a=0;for(let s=0,o=t.length;s<o;s++)s%505==0&&0!=s&&(n.set(R(r,e),i),i+=256,r=[],a++),r.push(t[s]);let s=t.length/2;return s%2&&s++,n.slice(0,s+512+4*a)}(t),{container:this.correctContainer_()})}}fromIMAADPCM(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(t,e=256){let n={index:0,predicted:0,step:7},r=new Int16Array(2*t.length),i=[],a=0;for(let s=0,o=t.length;s<o;s++){if(s%e==0&&0!=s){let t=T(i,n);r.set(t,a),a+=t.length,i=[]}i.push(t[s])}return r}(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}toALaw(){this.assure16Bit_();let t=new Int16Array(xt(this.data.samples.length,2));rt(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(t){let e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=z(t[n]);return e}(t),{container:this.correctContainer_()})}fromALaw(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(t){let e=new Int16Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=W(t[n]);return e}(this.data.samples),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}toMuLaw(){this.assure16Bit_();let t=new Int16Array(xt(this.data.samples.length,2));rt(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(t){let e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=H(t[n]);return e}(t),{container:this.correctContainer_()})}fromMuLaw(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(t){let e=new Int16Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=X(t[n]);return e}(this.data.samples),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}toBitDepth(t,e=!0){let n=t,r=this.bitDepth;e||("32f"!=t&&(n=this.dataType.bits.toString()),r=""+this.dataType.bits),this.assureUncompressed_();let i=this.getSamples(!0),a=new Float64Array(i.length);P(i,r,a,n),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,t,a,{container:this.correctContainer_()})}toSampleRate(t,e){this.validateResample_(t);let n=this.getSamples(),r=[];if(n.constructor===Float64Array)r=Ct(n,this.fmt.sampleRate,t,e);else for(let i=0;i<n.length;i++)r.push(Ct(n[i],this.fmt.sampleRate,t,e));this.fromExisting_(this.fmt.numChannels,t,this.bitDepth,r,{container:this.correctContainer_()})}validateResample_(t){if(!vt(this.fmt.numChannels,this.fmt.bitsPerSample,t))throw new Error("Invalid sample rate.");if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}assure16Bit_(){this.assureUncompressed_(),"16"!=this.bitDepth&&this.toBitDepth("16")}assureUncompressed_(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()}correctContainer_(){return"RF64"==this.container?"RIFF":this.container}fromExisting_(t,e,n,r,i){let a=new yt;Object.assign(this.fmt,a.fmt),Object.assign(this.fact,a.fact),Object.assign(this.ds64,a.ds64),Object.assign(this.data,a.data),this.newWavFile_(t,e,n,r,i)}}function xt(t,e){let n=t/e;return n%2&&n++,n}class It extends St{constructor(t){super(),t&&this.fromBuffer(t)}fromBase64(t){this.fromBuffer(C(t))}toBase64(){return A(this.toBuffer())}toDataURI(){return"data:audio/wav;base64,"+this.toBase64()}fromDataURI(t){this.fromBase64(t.replace("data:audio/wav;base64,",""))}}var Mt,Et={};Mt=function(){function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,s){var o=i.URL||i.webkitURL,u=document.createElement("a");a=a||t.name||"download",u.download=a,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,a,s):r(u,u.target="_blank")):(u.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,a){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),i);else if(n(t))e(t,i,a);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){r(s)}))}}:function(t,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var o="application/octet-stream"===t.type,u=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&u||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},c.readAsDataURL(t)}else{var h=i.URL||i.webkitURL,f=h.createObjectURL(t);s?s.location=f:location.href=f,s=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});i.saveAs=s.saveAs=s,Et=s},"function"==typeof define&&define.amd?define([],Mt):Mt();class Ot{constructor(){this.markers=[]}async getMarkersFromFile(t){return new Promise(((e,n)=>{let r=new FileReader,i=[];r.readAsDataURL(t),r.onloadend=()=>{let t=new It;const n=r.result.replace("data:","").replace(/^.+,/,"");t.fromBase64(n),i=t.listCuePoints(),e(i)},r.onerror=n}))}createFileFromBuffer(t,e){let n=new It;n.fromScratch(2,48e3,"32f",t);for(let t of e)"top"!=t.position&&n.setCuePoint({position:1e3*t.time});for(let t=0;t<n.cue.points.length;t++)n.cue.points[t].dwPosition=n.cue.points[t].dwSampleOffset;const r=n.toDataURI();(0,Et.saveAs)(r,"export.wav")}}var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.track=jt.config=jt.trackPageview=jt.load=void 0;const Rt=(t,e)=>{window.panelbear=window.panelbear||function(){window.panelbearQ=window.panelbearQ||[],window.panelbearQ.push(arguments)};try{window.panelbear(t,e)}catch(t){console.warn("There was an error while executing a Panelbear command",t)}};jt.load=(t,e)=>{var n;const r=document.createElement("script");r.async=!0,r.src=`${null!==(n=null==e?void 0:e.scriptSrc)&&void 0!==n?n:"https://cdn.panelbear.com/analytics.js"}?site=${t}`,document.head.appendChild(r),Rt("config",Object.assign({site:t,autoTrack:!1},e))};jt.trackPageview=()=>{Rt("trackPageview")};jt.config=t=>{Rt("config",t)};jt.track=t=>{Rt("track",t)};new class{constructor(){this.scrollPos=0,this.scrollMin=0,this.playOffset=0,this.wavesurfer=e(s).create({container:"#waveform",waveColor:"#ffd000",progressColor:"white",plugins:[o.create()]}),this.dropHandler=new l(this),this.markerHandler=new k(this),this.controlsHandler=new f(this),this.wavHandler=new Ot,this.panelbear=jt,this.initAnalytics(),this.wavesurfer.on("ready",this.onReady.bind(this))}onReady=async()=>{this.scrollMin=Math.round(this.wavesurfer.container.scrollWidth/this.wavesurfer.getDuration()),this.scrollPos=this.scrollMin,this.markerHandler.addMarkers(this.wavHandler.markers)};initAnalytics(){this.panelbear.load("z6xwVIhy6M"),this.panelbear.trackPageview();document.getElementById("export").addEventListener("click",(t=>{this.panelbear.track("export")}))}};document.getElementById("version").textContent=e("v1.0.3\n");
//# sourceMappingURL=index.91a34efd.js.map
